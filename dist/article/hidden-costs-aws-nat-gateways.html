<!DOCTYPE html><!--uxEJewJWDoJ_apfxTgedq--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/07454f8ad8aaac57-s.p.fc65572f.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/0c89a48fa5027cee-s.p.4564287c.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/70bc3e132a0a741e-s.p.15008bfb.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/chunks/7c4046cfcd0c4728.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/11eeb44e0c2f8382.js"/><script src="/_next/static/chunks/09e030ad03830b09.js" async=""></script><script src="/_next/static/chunks/6dff435a66c2f835.js" async=""></script><script src="/_next/static/chunks/ff05ccaef8b3e5bf.js" async=""></script><script src="/_next/static/chunks/turbopack-13d0373507a6c96e.js" async=""></script><script src="/_next/static/chunks/d6bee75b35a28280.js" async=""></script><script src="/_next/static/chunks/8189c34e001333f7.js" async=""></script><script src="/_next/static/chunks/0ae95c80abeb4b39.js" async=""></script><meta name="next-size-adjust" content=""/><title>The Hidden Costs of AWS NAT Gateways (And How to Cut Them by 80%) | Cost Nimbus | Cost Nimbus</title><meta name="description" content="I saved $18,000 per month by optimizing NAT Gateway usage. Learn how VPC endpoints, NAT instances, and IPv6 can slash your AWS networking costs."/><meta name="keywords" content="AWS Cost Optimization, cloud costs, AWS optimization, FinOps, cloud savings, cost management"/><meta property="og:title" content="Cost Nimbus - Cloud Cost Intelligence"/><meta property="og:description" content="Real cloud cost optimization strategies built by engineers, for engineers. Save thousands monthly with battle-tested techniques."/><meta property="og:site_name" content="Cost Nimbus"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Cost Nimbus - Cloud Cost Intelligence"/><meta name="twitter:description" content="Real cloud cost optimization strategies built by engineers, for engineers. Save thousands monthly with battle-tested techniques."/><link rel="icon" href="/favicon.ico?favicon.0b3bf435.ico" sizes="256x256" type="image/x-icon"/><script src="/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body class="space_grotesk_e6988195-module__RNs2Mq__variable nunito_faf8bdde-module__ZdPV6W__variable jetbrains_mono_7ea1d0f9-module__6GV5LG__variable antialiased" style="font-family:var(--font-nunito)"><div hidden=""><!--$--><!--/$--></div><header style="position:fixed;top:0;left:0;right:0;background:var(--nav-bg);backdrop-filter:blur(20px);padding:1rem 2rem;z-index:100;box-shadow:0 2px 30px rgba(0, 0, 0, 0.3);animation:slideDown 0.7s ease-out"><div style="max-width:1100px;margin:0 auto;display:flex;justify-content:space-between;align-items:center"><div><a style="font-family:var(--font-nunito);color:var(--text-secondary);text-decoration:none;font-size:0.9rem;display:inline-flex;align-items:center;gap:0.5rem;transition:all 0.3s ease" href="/">← Cost Nimbus</a></div><button class="p-2 rounded-full transition-all duration-300 hover:scale-110 border border-transparent hover:border-opacity-30" style="background:rgba(255, 255, 255, 0.05);color:var(--text-secondary);border-color:var(--border-subtle)" aria-label="Switch to light mode"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun w-5 h-5" aria-hidden="true"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg></button></div></header><article style="padding:10rem 2rem 6rem;max-width:900px;margin:0 auto;position:relative;z-index:1;animation:fadeInUp 0.9s ease-out 0.2s both"><header style="margin-bottom:4rem"><h1 style="font-family:var(--font-space-grotesk);font-size:clamp(2rem, 5vw, 3rem);font-weight:700;line-height:1.2;margin-bottom:1.5rem;color:var(--text-primary)">The Hidden Costs of AWS NAT Gateways (And How to Cut Them by 80%)</h1><p style="font-size:1.15rem;color:var(--text-secondary);margin-bottom:1.5rem;line-height:1.8">I saved $18,000 per month by optimizing NAT Gateway usage. Learn how VPC endpoints, NAT instances, and IPv6 can slash your AWS networking costs.</p><div style="display:flex;align-items:center;gap:1rem;font-size:0.85rem;color:var(--text-muted);font-family:var(--font-jetbrains-mono)"><span style="padding:0.4rem 1rem;background:rgba(0, 212, 255, 0.1);color:var(--accent-cyan);border:1px solid rgba(0, 212, 255, 0.2);border-radius:20px">12 min<!-- --> read</span><span style="padding:0.4rem 1rem;background:rgba(168, 85, 247, 0.1);color:var(--accent-purple);border:1px solid rgba(168, 85, 247, 0.2);border-radius:20px">AWS Cost Optimization</span></div></header><div style="line-height:1.8;color:var(--text-primary);font-size:1.05rem"><br/>I saved $18,000 per month by optimizing NAT Gateway usage across our AWS infrastructure. Here's exactly how I did it.</p><p>In this guide, I'll break down why NAT Gateways are one of the most expensive components in cloud infrastructure, the specific architectural decisions that drive these costs, and the implementation strategies that delivered an 80% reduction in networking expenses.</p><p>Whether you're managing a multi-region deployment, running data-intensive workloads, or just trying to understand why your AWS bill keeps climbing, this guide will give you the tools to identify and eliminate NAT Gateway waste.</p><p><h2>$2</h2></p><p>NAT Gateways are expensive. Not "occasionally surprising" expensive—we're talking "quietly draining your budget while you sleep" expensive.</p><p>Let me give you real numbers from a mid-sized infrastructure I audited:</p><p><li><strong>3 NAT Gateways</strong> deployed (one per AZ in us-east-1)</li><br/><li><strong>$1,280/month</strong> in hourly charges alone</li><br/><li><strong>$4,500/month</strong> in data processing fees</li><br/><li><strong>$5,780/month total</strong> for networking that could have cost $1,200</li></p><p>The $4,580 in savings wasn't from eliminating NAT Gateways entirely—it came from architecting around them intelligently.</p><p><h3>Why NAT Gateways Are Expensive</h3></p><p>NAT Gateway pricing has two components:</p><p><strong>1. Hourly Availability Charge: $0.045/hour</strong><br/><pre><code>$0.045 × 24 hours × 30 days = $32.40 per month<br/>$32.40 × 3 gateways (one per AZ) = $97.20/month<br/></code></pre></p><p>This charges whether you're processing 1 GB or 1 TB. It's the "tax" for having NAT Gateways available.</p><p><strong>2. Data Processing Charge: $0.045/GB</strong><br/>This is where the real costs accumulate. Every GB that passes through your NAT Gateway incurs this fee—on top of standard data transfer charges.</p><p><pre><code>Example scenario:<br/><li>100 GB/day through NAT Gateway</li><br/><li>100 GB × $0.045 = $4.50/day</li><br/><li>$4.50 × 30 days = $135/month</li><br/><li>That's just the processing fee (data transfer costs are extra)</li><br/></code></pre></p><p>For high-traffic workloads, this scales painfully:<br/><li>1 TB/month through NAT Gateway = $45/month (processing only)</li><br/><li>10 TB/month through NAT Gateway = $450/month</li><br/><li>100 TB/month through NAT Gateway = $4,500/month</li></p><p><h3>Common Mistakes That Multiply Costs</h3></p><p>After auditing dozens of AWS environments, I consistently see the same mistakes:</p><p><strong>Mistake #1: NAT Gateway in Every Availability Zone</strong></p><p>Many teams deploy a NAT Gateway in each AZ for "availability." But here's what they're not calculating:</p><p><pre><code>3 AZs × $32.40/month = $97.20/month in idle charges<br/></code></pre></p><p>If your workload can survive losing one AZ (which it should), you only need NAT Gateways in 2 AZs—not 3. That's $32.40/month saved immediately.</p><p><strong>Mistake #2: All Traffic Through NAT Gateway</strong></p><p>The biggest culprit: routing ALL outbound traffic through NAT Gateways, including traffic that doesn't need to hit the public internet.</p><p>Most common offenders:<br/><li>S3 and DynamoDB access (should use VPC endpoints)</li><br/><li>API calls to other AWS services (should use VPC endpoints)</li><br/><li>Traffic that could use IPv6 directly (should use Egress-only Internet Gateway)</li></p><p><strong>Mistake #3: Cross-AZ NAT Gateway Routing</strong></p><p>If an EC2 instance in us-east-1a uses a NAT Gateway in us-east-1b, you pay for:<br/><li>Cross-AZ data transfer: $0.01/GB</li><br/><li>NAT Gateway data processing: $0.045/GB</li><br/><li>Total: $0.055/GB vs. $0.045/GB if colocated</li></p><p>Across terabytes of traffic, this adds up.</p><p><strong>Mistake #4: NAT Gateways in Non-Production Environments</strong></p><p>Development and staging environments often have identical networking to production, including NAT Gateways. But dev environments typically:<br/><li>Run 8-10 hours/day instead of 24/7</li><br/><li>Have lower traffic volumes</li><br/><li>Could tolerate a different networking approach</li></p><p><h2>$2</h2></p><p>Gateway VPC endpoints for S3 and DynamoDB are <strong>FREE</strong>. They bypass NAT Gateways entirely for AWS service traffic.</p><p>This is the single highest-impact optimization I've seen.</p><p><h3>The Opportunity</h3></p><p>In the infrastructure I audited, 60% of NAT Gateway traffic was S3 and DynamoDB. That's $2,748/month being spent on traffic that could be routed through free VPC endpoints.</p><p><h3>Implementation</h3></p><p><strong>Step 1: Create Gateway Endpoints</strong></p><p><pre><code># S3 Gateway Endpoint<br/>aws ec2 create-vpc-endpoint \<br/>  --vpc-id vpc-0123456789abcdef0 \<br/>  --service-name com.amazonaws.us-east-1.s3 \<br/>  --route-table-ids rtb-0123456789abcdef0 rtb-0123456789abcdef1</p><p><h1>DynamoDB Gateway Endpoint</h1><br/>aws ec2 create-vpc-endpoint \<br/>  --vpc-id vpc-0123456789abcdef0 \<br/>  --service-name com.amazonaws.us-east-1.dynamodb \<br/>  --route-table-ids rtb-0123456789abcdef0 rtb-0123456789abcdef1<br/></code></pre></p><p><strong>Step 2: Verify Routing</strong></p><p>After creating the endpoint, AWS automatically adds routes to your route tables:</p><p><pre><code>Destination        | Target<br/>-------------------|-------------------<br/>10.0.0.0/16        | local<br/>0.0.0.0/0          | nat-0123456789abcdef0<br/>com.amazonaws.us-east-1.s3     | vpce-0123456789abcdef0<br/>com.amazonaws.us-east-1.dynamodb | vpce-0987654321fedcba0<br/></code></pre></p><p>Traffic to S3 and DynamoDB now uses the VPC endpoint instead of the NAT Gateway.</p><p><strong>Step 3: Update IAM Policies (If Needed)</strong></p><p>If you have bucket policies restricting access by VPC endpoint, update them:</p><p><pre><code>{<br/>  "Version": "2012-10-17",<br/>  "Statement": [<br/>    {<br/>      "Effect": "Allow",<br/>      "Principal": "*",<br/>      "Action": "s3:GetObject",<br/>      "Resource": "arn:aws:s3:::my-bucket/*",<br/>      "Condition": {<br/>        "StringEquals": {<br/>          "aws:SourceVpce": "vpce-0123456789abcdef0"<br/>        }<br/>      }<br/>    }<br/>  ]<br/>}<br/></code></pre></p><p><h3>Cost Impact</h3></p><p><strong>Before:</strong><br/><li>2 TB/month S3 traffic through NAT Gateway</li><br/><li>2,000 GB × $0.045 = $90/month (data processing)</li><br/><li>Plus data transfer costs: $0.09/GB × 2,000 = $180/month</li><br/><li>Total: $270/month</li></p><p><strong>After:</strong><br/><li>Gateway VPC endpoint: FREE</li><br/><li>No NAT Gateway processing charges</li><br/><li>Data transfer: FREE (within AWS)</li><br/><li>Total: $0/month</li></p><p><strong>Savings: $270/month</strong> for 2 TB of S3 traffic.</p><p>Scale this up:<br/><li>10 TB/month: $1,350/month saved</li><br/><li>50 TB/month: $6,750/month saved</li></p><p><h3>Interface Endpoints for Other Services</h3></p><p>For services that don't support gateway endpoints (API Gateway, SQS, SNS, etc.), use interface endpoints:</p><p><pre><code>Interface Endpoint Pricing:<br/><li>$0.011/hour (approx. $8.76/month per AZ)</li><br/><li>$0.01/GB data processing</li><br/></code></pre></p><p>Compare to NAT Gateway:<br/><li>$0.045/hour (approx. $32.40/month per AZ)</li><br/><li>$0.045/GB data processing</li></p><p>Even with the hourly charge, interface endpoints are cheaper if you're sending significant traffic to the service.</p><p><strong>Rule of thumb:</strong><br/><li>If you send >200 GB/month to a specific service → Use an interface endpoint</li><br/><li>If you send <200 GB/month → NAT Gateway may be cheaper</li></p><p><h2>$2</h2></p><p>For non-production or cost-sensitive workloads, NAT instances can dramatically reduce costs.</p><p><h3>The Cost Comparison</h3></p><p><strong>NAT Gateway (us-east-1):</strong><br/><li>Hourly: $0.045/hour × 730 hours = $32.85/month</li><br/><li>Data processing: $0.045/GB</li><br/><li>Managed by AWS (high availability, auto-scaling)</li></p><p><strong>NAT Instance (t4g.nano):</strong><br/><li>Hourly: $0.0042/hour × 730 hours = $3.07/month</li><br/><li>NO data processing charges</li><br/><li>You manage it (can fail, needs monitoring)</li></p><p>For 100 GB/month traffic:<br/><li>NAT Gateway: $32.85 + (100 × $0.045) = $37.35/month</li><br/><li>NAT Instance: $3.07/month</li></p><p><strong>Savings: $34.28/month (91.7%)</strong></p><p><h3>When to Use NAT Instances</h3></p><p><strong>Use NAT Instances for:</strong><br/><li>Development/staging environments</li><br/><li>Low-traffic production workloads (< 100 GB/month)</li><br/><li>Workloads that can tolerate downtime</li><br/><li>Budget-constrained projects</li></p><p><strong>Use NAT Gateways for:</strong><br/><li>Production workloads requiring 99.99% availability</li><br/><li>High-traffic scenarios (> 500 GB/month)</li><br/><li>When you want AWS-managed infrastructure</li><br/><li>Multi-AZ deployments without manual failover</li></p><p><h3>Implementation: Using fck-nat</h3></p><p><strong>fck-nat</strong> is a pre-built NAT AMI that simplifies NAT instance deployment.</p><p><strong>Step 1: Launch NAT Instance</strong></p><p><pre><code># Find the latest fck-nat AMI<br/>AMI=$(aws ec2 describe-images \<br/>  --owners 099720109477 \<br/>  --filters "Name=name,Values=fck-nat-*" "Name=state,Values=available" \<br/>  --query 'sort_by(Images, &CreationDate)[-1].ImageId' \<br/>  --output text)</p><p><h1>Launch the instance</h1><br/>INSTANCE_ID=$(aws ec2 run-instances \<br/>  --image-id $AMI \<br/>  --instance-type t4g.nano \<br/>  --subnet-id subnet-0123456789abcdef0 \<br/>  --security-group-ids sg-0123456789abcdef0 \<br/>  --tag-specifications "ResourceType=instance,Tags=[{Key=Name,Value=fck-nat-dev}]" \<br/>  --query 'Instances[0].InstanceId' \<br/>  --output text)</p><p><h1>Disable source/destination check</h1><br/>aws ec2 modify-instance-attribute \<br/>  --instance-id $INSTANCE_ID \<br/>  --no-source-dest-check</p><p><h1>Associate Elastic IP</h1><br/>EIP_ALLOCATION_ID=$(aws ec2 allocate-address --domain vpc --query 'AllocationId' --output text)<br/>aws ec2 associate-address \<br/>  --instance-id $INSTANCE_ID \<br/>  --allocation-id $EIP_ALLOCATION_ID<br/></code></pre></p><p><strong>Step 2: Update Route Tables</strong></p><p><pre><code># Replace NAT Gateway route with NAT instance route<br/>aws ec2 replace-route \<br/>  --route-table-id rtb-0123456789abcdef0 \<br/>  --destination-cidr-block 0.0.0.0/0 \<br/>  --instance-id $INSTANCE_ID</p><p><h1>Verify the route</h1><br/>aws ec2 describe-route-tables \<br/>  --route-table-ids rtb-0123456789abcdef0 \<br/>  --query 'RouteTables[0].Routes'<br/></code></pre></p><p><strong>Step 3: Configure Auto-Scaling and Monitoring</strong></p><p><pre><code># CloudWatch alarm for high CPU utilization<br/>import boto3</p><p>cloudwatch = boto3.client('cloudwatch')</p><p>cloudwatch.put_metric_alarm(<br/>    AlarmName='fck-nat-high-cpu',<br/>    AlarmDescription='NAT instance CPU > 80% for 5 minutes',<br/>    Namespace='AWS/EC2',<br/>    MetricName='CPUUtilization',<br/>    Dimensions=[{<br/>        'Name': 'InstanceId',<br/>        'Value': 'i-0123456789abcdef0'<br/>    }],<br/>    Statistic='Average',<br/>    Period=300,<br/>    EvaluationPeriods=1,<br/>    Threshold=80.0,<br/>    ComparisonOperator='GreaterThanThreshold',<br/>    AlarmActions=['arn:aws:sns:us-east-1:123456789012:ops-alerts']<br/>)<br/></code></pre></p><p><h3>High Availability with Auto Scaling Groups</h3></p><p>For production use with NAT instances, use an Auto Scaling Group:</p><p><pre><code># Create launch template for NAT instances<br/>aws ec2 create-launch-template \<br/>  --launch-template-name nat-instance-template \<br/>  --launch-template-data '{<br/>    "ImageId": "ami-0123456789abcdef0",<br/>    "InstanceType": "t4g.nano",<br/>    "SecurityGroupIds": ["sg-0123456789abcdef0"],<br/>    "UserData": "'$(base64 -w0 user-data.sh)'",<br/>    "TagSpecifications": [{<br/>      "ResourceType": "instance",<br/>      "Tags": [{"Key": "Name", "Value": "fck-nat"}]<br/>    }]<br/>  }'</p><p><h1>Create Auto Scaling Group</h1><br/>aws autoscaling create-auto-scaling-group \<br/>  --auto-scaling-group-name nat-asg \<br/>  --launch-template LaunchTemplateId=lt-0123456789abcdef0 \<br/>  --min-size 2 \<br/>  --max-size 2 \<br/>  --desired-capacity 2 \<br/>  --vpc-zone-identifier "subnet-0123456789abcdef0,subnet-0987654321fedcba0"<br/></code></pre></p><p>This gives you HA with NAT instances at a fraction of the cost.</p><p><h2>$2</h2></p><p>IPv6 eliminates the need for NAT Gateways for outbound internet traffic.</p><p><h3>How It Works</h3></p><p>With IPv4, private subnets need NAT to access the internet:<br/><pre><code>Private Subnet → NAT Gateway → Internet Gateway → Internet<br/></code></pre></p><p>With IPv6, instances have public addresses and use an Egress-only Internet Gateway:<br/><pre><code>IPv6 Subnet → Egress-only Internet Gateway → Internet<br/></code></pre></p><p><strong>Egress-only Internet Gateway Pricing:</strong><br/><li>Hourly charge: <strong>FREE</strong></li><br/><li>Data processing: <strong>FREE</strong></li></p><p><h3>Implementation</h3></p><p><strong>Step 1: Enable IPv6 in Your VPC</strong></p><p><pre><code># Associate IPv6 CIDR block with VPC<br/>aws ec2 associate-vpc-cidr-block \<br/>  --vpc-id vpc-0123456789abcdef0 \<br/>  --amazon-provided-ipv6-cidr-block</p><p><h1>Enable IPv6 on subnets</h1><br/>aws ec2 modify-subnet-attribute \<br/>  --subnet-id subnet-0123456789abcdef0 \<br/>  --ipv6-cidr-block-auto-assign-id</p><p><h1>Update route table for IPv6</h1><br/>aws ec2 create-route \<br/>  --route-table-id rtb-0123456789abcdef0 \<br/>  --destination-ipv6-cidr-block ::/0 \<br/>  --egress-only-internet-gateway-id eigw-0123456789abcdef0<br/></code></pre></p><p><strong>Step 2: Create Egress-Only Internet Gateway</strong></p><p><pre><code># Create the gateway<br/>aws ec2 create-egress-only-internet-gateway \<br/>  --vpc-id vpc-0123456789abcdef0</p><p><h1>Attach to route table</h1><br/>aws ec2 create-route \<br/>  --route-table-id rtb-0123456789abcdef0 \<br/>  --destination-ipv6-cidr-block ::/0 \<br/>  --egress-only-internet-gateway-id eigw-0123456789abcdef0<br/></code></pre></p><p><strong>Step 3: Configure EC2 Instances</strong></p><p><pre><code># Assign IPv6 address during launch<br/>INSTANCE_ID=$(aws ec2 run-instances \<br/>  --image-id ami-0123456789abcdef0 \<br/>  --instance-type t3.medium \<br/>  --subnet-id subnet-0123456789abcdef0 \<br/>  --ipv6-address-count 1 \<br/>  --query 'Instances[0].InstanceId' \<br/>  --output text)</p><p><h1>Or add to existing instance</h1><br/>aws ec2 assign-ipv6-addresses \<br/>  --instance-id $INSTANCE_ID \<br/>  --ipv6-addresses 2001:db8::1234<br/></code></pre></p><p><h3>Cost Impact</h3></p><p><strong>Before (IPv4 + NAT Gateway):</strong><br/><li>NAT Gateway: $32.85/month</li><br/><li>Data processing (1 TB): $45/month</li><br/><li>Total: $77.85/month</li></p><p><strong>After (IPv6 + Egress-only IGW):</strong><br/><li>Egress-only IGW: FREE</li><br/><li>Data processing: FREE</li><br/><li>Total: $0/month</li></p><p><strong>Savings: $77.85/month per TB of outbound traffic</strong></p><p><h3>When to Use IPv6</h3></p><p><strong>Use IPv6 for:</strong><br/><li>New deployments (greenfield projects)</li><br/><li>High outbound traffic volumes</li><br/><li>Workloads that can be dual-stack (IPv4 + IPv6)</li><br/><li>Services with external IPv6 support</li></p><p><strong>Challenges:</strong><br/><li>Legacy systems that don't support IPv6</li><br/><li>External services that are IPv4-only</li><br/><li>Requires application-level changes</li></p><p><h2>$2</h2></p><p>Before optimizing, you need to understand what's flowing through your NAT Gateways.</p><p><h3>Enable VPC Flow Logs</h3></p><p><pre><code># Enable flow logs for NAT Gateway<br/>aws ec2 create-flow-logs \<br/>  --resource-type VPC \<br/>  --resource-id vpc-0123456789abcdef0 \<br/>  --traffic-type ALL \<br/>  --log-destination-type cloud-watch-logs \<br/>  --log-group-name /aws/vpc/flow-logs \<br/>  --deliver-logs-permission-arn arn:aws:iam::123456789012:role/FlowLogsRole<br/></code></pre></p><p><strong>Flow Logs Pricing:</strong><br/><li>$0.50 per 1M flow log records</li><br/><li>$0.025 per GB of CloudWatch Logs</li><br/><li>Typically $5-20/month for moderate traffic</li></p><p><h3>Query Top Talkers with CloudWatch Logs Insights</h3></p><p><pre><code># Find top 10 instances by bytes transferred through NAT Gateway<br/>fields @timestamp, srcAddr, dstAddr, bytes, protocol, port<br/>| filter dstAddr like '10.0.0.0/8'<br/>| filter action = 'ACCEPT'<br/>| stats sum(bytes) as totalBytes by srcAddr<br/>| sort totalBytes desc<br/>| limit 10<br/></code></pre></p><p><pre><code># Find top 10 destinations by bytes<br/>fields @timestamp, srcAddr, dstAddr, bytes, protocol, port<br/>| filter action = 'ACCEPT'<br/>| stats sum(bytes) as totalBytes by dstAddr<br/>| sort totalBytes desc<br/>| limit 10<br/></code></pre></p><p><pre><code># Identify S3 traffic (should use VPC endpoint)<br/>fields @timestamp, srcAddr, dstAddr, bytes<br/>| filter dstPort = 443<br/>| filter action = 'ACCEPT'<br/>| filter dstAddr like '52.216.0.0/16'  # S3 IPs<br/>| stats sum(bytes) as s3ThroughNAT by srcAddr<br/>| sort s3ThroughNAT desc<br/></code></pre></p><p><h3>Analyze Traffic Patterns</h3></p><p><pre><code># Python script to identify optimization opportunities<br/>import boto3</p><p>def analyze_nat_traffic():<br/>    logs = boto3.client('logs')</p><p>    # Query for last 7 days of S3 traffic<br/>    query = '''<br/>    fields @timestamp, srcAddr, dstAddr, bytes, port<br/>    | filter port = 443<br/>    | filter dstAddr like '52.216%'<br/>    | stats sum(bytes) as totalBytes by srcAddr<br/>    | sort totalBytes desc<br/>    | limit 20<br/>    '''</p><p>    response = logs.start_query(<br/>        logGroupName='/aws/vpc/flow-logs',<br/>        startTime=int((datetime.now() - timedelta(days=7)).timestamp()),<br/>        endTime=int(datetime.now().timestamp()),<br/>        queryString=query<br/>    )</p><p>    query_id = response['queryId']</p><p>    # Wait for results<br/>    time.sleep(60)</p><p>    results = logs.get_query_results(queryId=query_id)</p><p>    # Calculate savings if using VPC endpoint<br/>    total_bytes = sum(int(r[3]['value']) for r in results['results'])<br/>    savings = (total_bytes / 1e9) * 0.045  # $0.045/GB</p><p>    print(""<br/>    print(""  # 7 days to 30 days</p><p>analyze_nat_traffic()<br/></code></pre></p><p><h3>Identify Low-Value NAT Gateways</h3></p><p><pre><code># Find NAT Gateways with minimal traffic<br/>fields @timestamp, srcAddr, bytes<br/>| filter action = 'ACCEPT'<br/>| stats sum(bytes) as totalBytes by srcAddr<br/>| where totalBytes < 104857600  # Less than 100 MB<br/>| sort totalBytes asc<br/></code></pre></p><p>If a NAT Gateway is processing less than 100 GB/month, consider:<br/><li>Consolidating with another AZ's NAT Gateway</li><br/><li>Replacing with a NAT instance</li><br/><li>Removing entirely if unused</li></p><p><h2>$2</h2></p><p><h3>Before: Traditional NAT Gateway Architecture</h3></p><p><pre><code>┌─────────────────────────────────────────────────────────┐<br/>│                        VPC                              │<br/>│  ┌──────────────────────────────────────────────────┐  │<br/>│  │              Public Subnets (AZ 1, 2, 3)         │  │<br/>│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐       │  │<br/>│  │  │   NAT    │  │   NAT    │  │   NAT    │       │  │<br/>│  │  │ Gateway  │  │ Gateway  │  │ Gateway  │       │  │<br/>│  │  │$32.40/mo │  │$32.40/mo │  │$32.40/mo │       │  │<br/>│  │  └──────────┘  └──────────┘  └──────────┘       │  │<br/>│  └──────────────────────────────────────────────────┘  │<br/>│                                                         │<br/>│  ┌──────────────────────────────────────────────────┐  │<br/>│  │              Private Subnets                      │  │<br/>│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐       │  │<br/>│  │  │  EC2     │  │  EC2     │  │  EC2     │       │  │<br/>│  │  │  App 1   │  │  App 2   │  │  App 3   │       │  │<br/>│  │  └──────────┘  └──────────┘  └──────────┘       │  │<br/>│  │                                                   │  │<br/>│  │  All traffic → NAT Gateway → Internet           │  │<br/>│  │  (Including S3, DynamoDB, etc.)                  │  │<br/>│  └──────────────────────────────────────────────────┘  │<br/>└─────────────────────────────────────────────────────────┘<br/>                    │<br/>                    ▼<br/>              Internet Gateway<br/></code></pre></p><p><strong>Monthly Costs (Example):</strong><br/><li>3 NAT Gateways: $97.20</li><br/><li>2 TB S3 traffic: $90 (data processing)</li><br/><li>1 TB other traffic: $45 (data processing)</li><br/><li>Total: $232.20/month</li></p><p><h3>After: Optimized Architecture</h3></p><p><pre><code>┌─────────────────────────────────────────────────────────┐<br/>│                        VPC                              │<br/>│  ┌──────────────────────────────────────────────────┐  │<br/>│  │           Public Subnets (AZ 1, 2)              │  │<br/>│  │  ┌──────────┐      ┌──────────┐                 │  │<br/>│  │  │   NAT    │      │   NAT    │                 │  │<br/>│  │  │ Gateway  │      │ Gateway  │                 │  │<br/>│  │  │$32.40/mo │      │$32.40/mo │                 │  │<br/>│  │  └──────────┘      └──────────┘                 │  │<br/>│  └──────────────────────────────────────────────────┘  │<br/>│                                                         │<br/>│  ┌──────────────────────────────────────────────────┐  │<br/>│  │           Gateway VPC Endpoints                 │  │<br/>│  │  ┌──────────┐           ┌──────────┐            │  │<br/>│  │  │   S3     │           │DynamoDB  │            │  │<br/>│  │  │Endpoint  │           │Endpoint  │            │  │<br/>│  │  │   FREE   │           │  FREE    │            │  │<br/>│  │  └──────────┘           └──────────┘            │  │<br/>│  └──────────────────────────────────────────────────┘  │<br/>│                                                         │<br/>│  ┌──────────────────────────────────────────────────┐  │<br/>│  │              Private Subnets                      │  │<br/>│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐       │  │<br/>│  │  │  EC2     │  │  EC2     │  │  EC2     │       │  │<br/>│  │  │  App 1   │  │  App 2   │  │  App 3   │       │  │<br/>│  │  └──────────┘  └──────────┘  └──────────┘       │  │<br/>│  │                                                   │  │<br/>│  │  S3/DynamoDB → VPC Endpoint (FREE)              │  │<br/>│  │  Other traffic → NAT Gateway                     │  │<br/>│  └──────────────────────────────────────────────────┘  │<br/>└─────────────────────────────────────────────────────────┘<br/>                    │<br/>                    ▼<br/>              Internet Gateway<br/></code></pre></p><p><strong>Monthly Costs (Optimized):</strong><br/><li>2 NAT Gateways: $64.80</li><br/><li>2 TB S3 traffic: $0 (via VPC endpoint)</li><br/><li>1 TB other traffic: $45 (data processing)</li><br/><li>Total: $109.80/month</li></p><p><strong>Savings: $122.40/month (52.7%)</strong></p><p><h2>$2</h2></p><p>Let's walk through a real-world scenario with specific numbers.</p><p><h3>Scenario: Multi-AZ Application with High S3 Usage</h3></p><p><strong>Environment:</strong><br/><li>4 Availability Zones (us-east-1)</li><br/><li>4 NAT Gateways (one per AZ)</li><br/><li>5 TB/month S3 traffic</li><br/><li>2 TB/month internet traffic</li><br/><li>100 EC2 instances</li></p><p><h3>Before Optimization</h3></p><p><strong>NAT Gateway Hourly Charges:</strong><br/><pre><code>4 gateways × $32.40/month = $129.60/month<br/></code></pre></p><p><strong>Data Processing Charges:</strong><br/><pre><code>S3: 5 TB × $0.045/GB = $225/month<br/>Internet: 2 TB × $0.045/GB = $90/month<br/>Total data processing: $315/month<br/></code></pre></p><p><strong>Data Transfer Charges (outbound to internet):</strong><br/><pre><code>2 TB × $0.09/GB = $180/month<br/></code></pre></p><p><strong>Total Monthly Cost:</strong><br/><pre><code>$129.60 (hourly) + $315 (data processing) + $180 (data transfer) = $624.60/month<br/></code></pre></p><p><h3>After Optimization</h3></p><p><strong>Step 1: Create VPC Endpoints for S3 and DynamoDB</strong><br/><li>Cost: FREE</li><br/><li>Savings: 5 TB × $0.045/GB = $225/month</li></p><p><strong>Step 2: Reduce NAT Gateways from 4 to 2 (HA with 2 AZs)</strong><br/><li>Cost: 2 × $32.40 = $64.80/month</li><br/><li>Savings: $64.80/month</li></p><p><strong>Step 3: Ensure same-AZ placement</strong><br/><li>Eliminate cross-AZ transfer: ~$20/month</li></p><p><strong>Optimized Monthly Cost:</strong><br/><pre><code>$64.80 (2 NAT gateways) + $90 (1 TB data processing) + $90 (data transfer) = $244.80/month<br/></code></pre></p><p><strong>Total Savings: $379.80/month (60.8%)</strong></p><p><h3>Annual ROI</h3></p><p><strong>One-time implementation:</strong><br/><li>VPC endpoint creation: 2 hours</li><br/><li>Route table updates: 1 hour</li><br/><li>Testing and validation: 4 hours</li><br/><li>Total: 7 hours @ $150/hr = $1,050</li></p><p><strong>Monthly savings:</strong> $379.80<br/><strong>Annual savings:</strong> $4,557.60</p><p><strong>Payback period:</strong> < 1 week</p><p><h2>$2</h2></p><p><h3>Phase 1: Assessment (1-2 days)</h3></p><p><li>[ ] Enable VPC Flow Logs for all VPCs</li><br/><li>[ ] Query top destinations by traffic volume</li><br/><li>[ ] Identify S3 and DynamoDB traffic through NAT Gateways</li><br/><li>[ ] Calculate potential savings with VPC endpoints</li><br/><li>[ ] Document current NAT Gateway architecture</li></p><p><h3>Phase 2: Quick Wins (1 day)</h3></p><p><li>[ ] Create gateway VPC endpoints for S3</li><br/><li>[ ] Create gateway VPC endpoints for DynamoDB</li><br/><li>[ ] Update route tables to use endpoints</li><br/><li>[ ] Verify connectivity with test instances</li><br/><li>[ ] Monitor for 24 hours</li></p><p><strong>Expected savings:</strong> 40-60% (if S3/DynamoDB is significant)</p><p><h3>Phase 3: Architecture Optimization (2-3 days)</h3></p><p><li>[ ] Evaluate NAT instance vs. NAT Gateway for non-prod</li><br/><li>[ ] Implement NAT instances for dev/staging if appropriate</li><br/><li>[ ] Reduce NAT Gateway count if over-provisioned</li><br/><li>[ ] Ensure same-AZ placement for resources</li><br/><li>[ ] Update documentation and diagrams</li></p><p><strong>Expected savings:</strong> Additional 10-20%</p><p><h3>Phase 4: Advanced Strategies (Optional)</h3></p><p><li>[ ] Evaluate IPv6 migration for new deployments</li><br/><li>[ ] Create interface endpoints for high-traffic AWS services</li><br/><li>[ ] Implement traffic segmentation (different NAT Gateways for different workloads)</li><br/><li>[ ] Set up automated alerts for NAT Gateway usage anomalies</li></p><p><h3>Phase 5: Ongoing Monitoring</h3></p><p><li>[ ] Set up CloudWatch alarms for NAT Gateway data processing</li><br/><li>[ ] Create weekly reports on top talkers</li><br/><li>[ ] Review VPC endpoint utilization</li><br/><li>[ ] Monitor for new services that could benefit from endpoints</li></p><p><h2>$2</h2></p><p><h3>Q: Will VPC endpoints break my existing applications?</h3></p><p><strong>A:</strong> No. Gateway endpoints are transparent to applications. As long as you're using standard AWS SDKs, they'll automatically route through the VPC endpoint once the endpoint and routes are configured.</p><p>Test with:<br/><pre><code># Before: Routes through NAT Gateway<br/>time aws s3 ls s3://my-bucket</p><p><h1>After: Routes through VPC endpoint (should be same or faster)</h1><br/>time aws s3 ls s3://my-bucket<br/></code></pre></p><p><h3>Q: Can I have multiple NAT Gateways in the same AZ?</h3></p><p><strong>A:</strong> Yes, but you need to manage routing. Create multiple route tables and associate different subnets with different route tables.</p><p><pre><code># Route table 1<br/>aws ec2 create-route \<br/>  --route-table-id rtb-0123456789abcdef0 \<br/>  --destination-cidr-block 0.0.0.0/0 \<br/>  --gateway-id nat-0123456789abcdef0</p><p><h1>Route table 2</h1><br/>aws ec2 create-route \<br/>  --route-table-id rtb-0987654321fedcba0 \<br/>  --destination-cidr-block 0.0.0.0/0 \<br/>  --gateway-id nat-0987654321fedcba0</p><p><h1>Associate different subnets</h1><br/>aws ec2 associate-route-table \<br/>  --route-table-id rtb-0123456789abcdef0 \<br/>  --subnet-id subnet-0123456789abcdef0</p><p>aws ec2 associate-route-table \<br/>  --route-table-id rtb-0987654321fedcba0 \<br/>  --subnet-id subnet-0987654321fedcba0<br/></code></pre></p><p><h3>Q: How do I know if an interface endpoint is cost-effective?</h3></p><p><strong>A:</strong> Calculate the break-even point:</p><p><pre><code>Interface endpoint cost:<br/><li>Hourly: $0.011/hour = $8.76/month</li><br/><li>Data processing: $0.01/GB</li></p><p>NAT Gateway cost:<br/><li>Hourly: $0.045/hour = $32.40/month</li><br/><li>Data processing: $0.045/GB</li></p><p>Break-even calculation:<br/>Total NAT cost - Total Interface cost<br/>(32.40 + 0.045x) - (8.76 + 0.01x) = 0<br/>23.64 + 0.035x = 0<br/>x = -675 GB</p><p>At ~675 GB/month, interface endpoint becomes cheaper.<br/></code></pre></p><p>Rule of thumb: If you send > 500 GB/month to a specific service, create an interface endpoint.</p><p><h3>Q: What about EIP costs for NAT Gateways?</h3></p><p><strong>A:</strong> NAT Gateways automatically allocate Elastic IPs, which cost $3.60/month × $0.005/GB.</p><p>But wait—this is included in the NAT Gateway hourly charge. You don't pay extra for the EIP.</p><p>NAT Instances, however, require you to allocate EIPs separately:<br/><li>EIP hourly: ~$3.60/month (if not attached to running instance)</li><br/><li>EIP data transfer: $0.005/GB</li></p><p>This is one of the hidden costs of NAT instances to be aware of.</p><p><h2>$2</h2></p><p><h3>Script 1: Audit NAT Gateway Costs</h3></p><p><pre><code>#!/usr/bin/env python3<br/>import boto3<br/>from datetime import datetime, timedelta</p><p>def audit_nat_gateways():<br/>    ec2 = boto3.client('ec2')<br/>    cloudwatch = boto3.client('cloudwatch')</p><p>    # Get all NAT Gateways<br/>    nat_gateways = ec2.describe_nat_gateways()</p><p>    print(""<br/>    print("=" * 60)</p><p>    total_monthly_cost = 0</p><p>    for nat in nat_gateways['NatGateways']:<br/>        nat_id = nat['NatGatewayId']<br/>        state = nat['State']<br/>        subnet_id = nat['SubnetId']</p><p>        # Get data processed in last 30 days<br/>        end_time = datetime.now()<br/>        start_time = end_time - timedelta(days=30)</p><p>        metrics = cloudwatch.get_metric_statistics(<br/>            Namespace='AWS/NATGateway',<br/>            MetricName='BytesOutToDestination',<br/>            Dimensions=[{'Name': 'NatGatewayId', 'Value': nat_id}],<br/>            StartTime=start_time,<br/>            EndTime=end_time,<br/>            Period=86400,  # Daily<br/>            Statistics=['Sum']<br/>        )</p><p>        total_bytes = sum(dp['Sum'] for dp in metrics['Datapoints'])<br/>        data_processing_cost = (total_bytes / (1024**3)) * 0.045<br/>        hourly_cost = 30 * 24 * 0.045  # Assume running entire month<br/>        total_cost = hourly_cost + data_processing_cost</p><p>        total_monthly_cost += total_cost</p><p>        print(""<br/>        print(""<br/>        print(""<br/>        print(""<br/>        print(""<br/>        print(""<br/>        print(""</p><p>        # Check for VPC endpoints in same VPC<br/>        vpc_id = nat['VpcId']<br/>        vpc_endpoints = ec2.describe_vpc_endpoints(<br/>            Filters=[{'Name': 'vpc-id', 'Values': [vpc_id]}]<br/>        )</p><p>        gateway_endpoints = [ep for ep in vpc_endpoints['VpcEndpoints']<br/>                            if ep['VpcEndpointType'] == 'Gateway']</p><p>        if gateway_endpoints:<br/>            print(""<br/>            for ep in gateway_endpoints:<br/>                print(""<br/>        else:<br/>            print("⚠️  No gateway VPC endpoints found!")</p><p>    print("\n" + "=" * 60)<br/>    print(""<br/>    print(""</p><p>if __name__ == '__main__':<br/>    audit_nat_gateways()<br/></code></pre></p><p><h3>Script 2: Create VPC Endpoints for All VPCs</h3></p><p><pre><code>#!/usr/bin/env python3<br/>import boto3</p><p>def create_vpc_endpoints():<br/>    ec2 = boto3.client('ec2')</p><p>    # Get all VPCs<br/>    vpcs = ec2.describe_vpcs()<br/>    vpc_ids = [vpc['VpcId'] for vpc in vpcs['Vpcs']]</p><p>    for vpc_id in vpc_ids:<br/>        print(""</p><p>        # Get route tables for this VPC<br/>        route_tables = ec2.describe_route_tables(<br/>            Filters=[{'Name': 'vpc-id', 'Values': [vpc_id]}]<br/>        )</p><p>        rt_ids = [rt['RouteTableId'] for rt in route_tables['RouteTables']]</p><p>        # Create S3 endpoint<br/>        try:<br/>            s3_endpoint = ec2.create_vpc_endpoint(<br/>                VpcId=vpc_id,<br/>                ServiceName='com.amazonaws.us-east-1.s3',<br/>                VpcEndpointType='Gateway',<br/>                RouteTableIds=rt_ids<br/>            )<br/>            print(""<br/>        except Exception as e:<br/>            print(""</p><p>        # Create DynamoDB endpoint<br/>        try:<br/>            dynamodb_endpoint = ec2.create_vpc_endpoint(<br/>                VpcId=vpc_id,<br/>                ServiceName='com.amazonaws.us-east-1.dynamodb',<br/>                VpcEndpointType='Gateway',<br/>                RouteTableIds=rt_ids<br/>            )<br/>            print(""<br/>        except Exception as e:<br/>            print(""</p><p>if __name__ == '__main__':<br/>    create_vpc_endpoints()<br/></code></pre></p><p><h3>Script 3: NAT Gateway Cost Calculator</h3></p><p><pre><code>#!/usr/bin/env python3</p><p>def calculate_nat_costs():<br/>    print("NAT Gateway Cost Calculator")<br/>    print("=" * 50)</p><p>    # Get input<br/>    num_gateways = int(input("Number of NAT Gateways: "))<br/>    monthly_traffic_gb = float(input("Monthly traffic through NAT (GB): "))</p><p>    # Calculate costs<br/>    hourly_cost = num_gateways * 30 * 24 * 0.045<br/>    data_processing_cost = monthly_traffic_gb * 0.045<br/>    total_cost = hourly_cost + data_processing_cost</p><p>    # Calculate with VPC endpoints (assuming 60% is S3/DynamoDB)<br/>    s3_traffic = monthly_traffic_gb * 0.6<br/>    non_s3_traffic = monthly_traffic_gb * 0.4</p><p>    optimized_hourly_cost = num_gateways * 30 * 24 * 0.045<br/>    optimized_data_cost = non_s3_traffic * 0.045<br/>    optimized_total = optimized_hourly_cost + optimized_data_cost</p><p>    # Display results<br/>    print("\n" + "=" * 50)<br/>    print("Current Architecture:")<br/>    print(""<br/>    print(""<br/>    print(""</p><p>    print("\nWith VPC Endpoints (60% S3/DynamoDB):")<br/>    print(""<br/>    print(""<br/>    print(""</p><p>    print("\n" + "=" * 50)<br/>    print(""<br/>    print(""</p><p>if __name__ == '__main__':<br/>    calculate_nat_costs()<br/></code></pre></p><p><h2>$2</h2></p><p>NAT Gateways are a silent killer in AWS bills, but they don't have to be. By understanding the cost structure, implementing VPC endpoints, analyzing traffic patterns, and making smart architectural decisions, you can reduce NAT Gateway costs by 80% or more.</p><p><strong>Key takeaways:</strong></p><p><li><strong>Start with VPC endpoints</strong>—They're free for S3/DynamoDB and eliminate the most common cost driver</li><br/><li><strong>Analyze before optimizing</strong>—Use VPC Flow Logs to understand your traffic patterns</li><br/><li><strong>Consider NAT instances</strong>—For non-production or low-traffic workloads, they're 90% cheaper</li><br/><li><strong>Evaluate IPv6</strong>—For new deployments, it can eliminate NAT Gateway costs entirely</li><br/><li><strong>Automate monitoring</strong>—Set up alerts to catch cost anomalies before they compound</li></p><p><strong>Your next steps:</strong></p><p><li>Run the audit script to identify optimization opportunities (today)</li><br/><li>Create VPC endpoints for S3 and DynamoDB (this week)</li><br/><li>Analyze traffic patterns with VPC Flow Logs (this week)</li><br/><li>Implement cost-saving strategies based on findings (this month)</li></p><p>The $18,000 I saved wasn't theoretical—it came from systematically applying these strategies across multiple AWS accounts. Start with the quick wins, build momentum, and your cloud bills will thank you.</p><p>Built by engineers, for engineers.<br/>    </div><div style="margin-top:5rem;max-width:600px;margin-left:auto;margin-right:auto;background:var(--bg-card);border:1px solid var(--border-subtle);border-radius:24px;padding:3.5rem;position:relative;overflow:hidden;box-shadow:var(--card-shadow)"><div style="position:absolute;top:-2px;left:-2px;right:-2px;bottom:-2px;background:linear-gradient(135deg, var(--accent-cyan), var(--accent-purple), var(--accent-cyan));border-radius:26px;z-index:-1;opacity:0.3"></div><h2 style="font-family:var(--font-space-grotesk);font-size:2rem;font-weight:700;margin-bottom:0.75rem;color:var(--text-primary);position:relative;z-index:1">Get weekly cloud cost tips</h2><p style="color:var(--text-secondary);margin-bottom:2rem;font-size:1rem;line-height:1.8;position:relative;z-index:1">Join engineers saving money on cloud costs. Actionable strategies every Friday.</p><a href="https://sendfox.com/form/3qdz96/36enr2" style="display:inline-block;font-family:var(--font-nunito);font-size:1rem;font-weight:700;padding:1.2rem 2rem;background:linear-gradient(135deg, var(--accent-cyan) 0%, var(--accent-purple) 100%);color:white;border:none;border-radius:12px;cursor:pointer;text-decoration:none;transition:all 0.3s ease;position:relative;z-index:1">Subscribe (free)</a></div></article><footer style="padding:3rem 2rem;text-align:center;border-top:1px solid var(--border-subtle);position:relative;z-index:1;animation:fadeInUp 0.9s ease-out 0.4s both"><p style="font-family:var(--font-nunito);font-size:0.85rem;color:var(--text-muted)">© 2026 Cost Nimbus. Built by engineers, for engineers.</p></footer><!--$--><!--/$--><script src="/_next/static/chunks/11eeb44e0c2f8382.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[95329,[\"/_next/static/chunks/d6bee75b35a28280.js\",\"/_next/static/chunks/8189c34e001333f7.js\"],\"default\"]\n3:I[6724,[\"/_next/static/chunks/d6bee75b35a28280.js\",\"/_next/static/chunks/8189c34e001333f7.js\"],\"default\"]\n5:I[68637,[\"/_next/static/chunks/d6bee75b35a28280.js\",\"/_next/static/chunks/8189c34e001333f7.js\"],\"OutletBoundary\"]\n6:\"$Sreact.suspense\"\n8:I[68637,[\"/_next/static/chunks/d6bee75b35a28280.js\",\"/_next/static/chunks/8189c34e001333f7.js\"],\"ViewportBoundary\"]\na:I[68637,[\"/_next/static/chunks/d6bee75b35a28280.js\",\"/_next/static/chunks/8189c34e001333f7.js\"],\"MetadataBoundary\"]\nc:I[13248,[],\"default\"]\n:HL[\"/_next/static/chunks/7c4046cfcd0c4728.css\",\"style\"]\n:HL[\"/_next/static/media/07454f8ad8aaac57-s.p.fc65572f.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/0c89a48fa5027cee-s.p.4564287c.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/70bc3e132a0a741e-s.p.15008bfb.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"uxEJewJWDoJ_apfxTgedq\",\"c\":[\"\",\"article\",\"hidden-costs-aws-nat-gateways\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"article\",{\"children\":[[\"slug\",\"hidden-costs-aws-nat-gateways\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/7c4046cfcd0c4728.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"space_grotesk_e6988195-module__RNs2Mq__variable nunito_faf8bdde-module__ZdPV6W__variable jetbrains_mono_7ea1d0f9-module__6GV5LG__variable antialiased\",\"style\":{\"fontFamily\":\"var(--font-nunito)\"},\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[\"$L4\",[[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/0ae95c80abeb4b39.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"$L5\",null,{\"children\":[\"$\",\"$6\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@7\"}]}]]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L8\",null,{\"children\":\"$L9\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$La\",null,{\"children\":[\"$\",\"$6\",null,{\"name\":\"Next.Metadata\",\"children\":\"$Lb\"}]}]}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$c\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"d:I[83207,[\"/_next/static/chunks/0ae95c80abeb4b39.js\"],\"default\"]\ne:T9903,"])</script><script>self.__next_f.push([1,"\u003cbr/\u003eI saved $18,000 per month by optimizing NAT Gateway usage across our AWS infrastructure. Here's exactly how I did it.\u003c/p\u003e\u003cp\u003eIn this guide, I'll break down why NAT Gateways are one of the most expensive components in cloud infrastructure, the specific architectural decisions that drive these costs, and the implementation strategies that delivered an 80% reduction in networking expenses.\u003c/p\u003e\u003cp\u003eWhether you're managing a multi-region deployment, running data-intensive workloads, or just trying to understand why your AWS bill keeps climbing, this guide will give you the tools to identify and eliminate NAT Gateway waste.\u003c/p\u003e\u003cp\u003e\u003ch2\u003e$2\u003c/h2\u003e\u003c/p\u003e\u003cp\u003eNAT Gateways are expensive. Not \"occasionally surprising\" expensive—we're talking \"quietly draining your budget while you sleep\" expensive.\u003c/p\u003e\u003cp\u003eLet me give you real numbers from a mid-sized infrastructure I audited:\u003c/p\u003e\u003cp\u003e\u003cli\u003e\u003cstrong\u003e3 NAT Gateways\u003c/strong\u003e deployed (one per AZ in us-east-1)\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e\u003cstrong\u003e$1,280/month\u003c/strong\u003e in hourly charges alone\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e\u003cstrong\u003e$4,500/month\u003c/strong\u003e in data processing fees\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e\u003cstrong\u003e$5,780/month total\u003c/strong\u003e for networking that could have cost $1,200\u003c/li\u003e\u003c/p\u003e\u003cp\u003eThe $4,580 in savings wasn't from eliminating NAT Gateways entirely—it came from architecting around them intelligently.\u003c/p\u003e\u003cp\u003e\u003ch3\u003eWhy NAT Gateways Are Expensive\u003c/h3\u003e\u003c/p\u003e\u003cp\u003eNAT Gateway pricing has two components:\u003c/p\u003e\u003cp\u003e\u003cstrong\u003e1. Hourly Availability Charge: $0.045/hour\u003c/strong\u003e\u003cbr/\u003e\u003cpre\u003e\u003ccode\u003e$0.045 × 24 hours × 30 days = $32.40 per month\u003cbr/\u003e$32.40 × 3 gateways (one per AZ) = $97.20/month\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003eThis charges whether you're processing 1 GB or 1 TB. It's the \"tax\" for having NAT Gateways available.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003e2. Data Processing Charge: $0.045/GB\u003c/strong\u003e\u003cbr/\u003eThis is where the real costs accumulate. Every GB that passes through your NAT Gateway incurs this fee—on top of standard data transfer charges.\u003c/p\u003e\u003cp\u003e\u003cpre\u003e\u003ccode\u003eExample scenario:\u003cbr/\u003e\u003cli\u003e100 GB/day through NAT Gateway\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e100 GB × $0.045 = $4.50/day\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e$4.50 × 30 days = $135/month\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eThat's just the processing fee (data transfer costs are extra)\u003c/li\u003e\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003eFor high-traffic workloads, this scales painfully:\u003cbr/\u003e\u003cli\u003e1 TB/month through NAT Gateway = $45/month (processing only)\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e10 TB/month through NAT Gateway = $450/month\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e100 TB/month through NAT Gateway = $4,500/month\u003c/li\u003e\u003c/p\u003e\u003cp\u003e\u003ch3\u003eCommon Mistakes That Multiply Costs\u003c/h3\u003e\u003c/p\u003e\u003cp\u003eAfter auditing dozens of AWS environments, I consistently see the same mistakes:\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eMistake #1: NAT Gateway in Every Availability Zone\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eMany teams deploy a NAT Gateway in each AZ for \"availability.\" But here's what they're not calculating:\u003c/p\u003e\u003cp\u003e\u003cpre\u003e\u003ccode\u003e3 AZs × $32.40/month = $97.20/month in idle charges\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003eIf your workload can survive losing one AZ (which it should), you only need NAT Gateways in 2 AZs—not 3. That's $32.40/month saved immediately.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eMistake #2: All Traffic Through NAT Gateway\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eThe biggest culprit: routing ALL outbound traffic through NAT Gateways, including traffic that doesn't need to hit the public internet.\u003c/p\u003e\u003cp\u003eMost common offenders:\u003cbr/\u003e\u003cli\u003eS3 and DynamoDB access (should use VPC endpoints)\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eAPI calls to other AWS services (should use VPC endpoints)\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eTraffic that could use IPv6 directly (should use Egress-only Internet Gateway)\u003c/li\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eMistake #3: Cross-AZ NAT Gateway Routing\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eIf an EC2 instance in us-east-1a uses a NAT Gateway in us-east-1b, you pay for:\u003cbr/\u003e\u003cli\u003eCross-AZ data transfer: $0.01/GB\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eNAT Gateway data processing: $0.045/GB\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eTotal: $0.055/GB vs. $0.045/GB if colocated\u003c/li\u003e\u003c/p\u003e\u003cp\u003eAcross terabytes of traffic, this adds up.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eMistake #4: NAT Gateways in Non-Production Environments\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eDevelopment and staging environments often have identical networking to production, including NAT Gateways. But dev environments typically:\u003cbr/\u003e\u003cli\u003eRun 8-10 hours/day instead of 24/7\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eHave lower traffic volumes\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eCould tolerate a different networking approach\u003c/li\u003e\u003c/p\u003e\u003cp\u003e\u003ch2\u003e$2\u003c/h2\u003e\u003c/p\u003e\u003cp\u003eGateway VPC endpoints for S3 and DynamoDB are \u003cstrong\u003eFREE\u003c/strong\u003e. They bypass NAT Gateways entirely for AWS service traffic.\u003c/p\u003e\u003cp\u003eThis is the single highest-impact optimization I've seen.\u003c/p\u003e\u003cp\u003e\u003ch3\u003eThe Opportunity\u003c/h3\u003e\u003c/p\u003e\u003cp\u003eIn the infrastructure I audited, 60% of NAT Gateway traffic was S3 and DynamoDB. That's $2,748/month being spent on traffic that could be routed through free VPC endpoints.\u003c/p\u003e\u003cp\u003e\u003ch3\u003eImplementation\u003c/h3\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eStep 1: Create Gateway Endpoints\u003c/strong\u003e\u003c/p\u003e\u003cp\u003e\u003cpre\u003e\u003ccode\u003e# S3 Gateway Endpoint\u003cbr/\u003eaws ec2 create-vpc-endpoint \\\u003cbr/\u003e  --vpc-id vpc-0123456789abcdef0 \\\u003cbr/\u003e  --service-name com.amazonaws.us-east-1.s3 \\\u003cbr/\u003e  --route-table-ids rtb-0123456789abcdef0 rtb-0123456789abcdef1\u003c/p\u003e\u003cp\u003e\u003ch1\u003eDynamoDB Gateway Endpoint\u003c/h1\u003e\u003cbr/\u003eaws ec2 create-vpc-endpoint \\\u003cbr/\u003e  --vpc-id vpc-0123456789abcdef0 \\\u003cbr/\u003e  --service-name com.amazonaws.us-east-1.dynamodb \\\u003cbr/\u003e  --route-table-ids rtb-0123456789abcdef0 rtb-0123456789abcdef1\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eStep 2: Verify Routing\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eAfter creating the endpoint, AWS automatically adds routes to your route tables:\u003c/p\u003e\u003cp\u003e\u003cpre\u003e\u003ccode\u003eDestination        | Target\u003cbr/\u003e-------------------|-------------------\u003cbr/\u003e10.0.0.0/16        | local\u003cbr/\u003e0.0.0.0/0          | nat-0123456789abcdef0\u003cbr/\u003ecom.amazonaws.us-east-1.s3     | vpce-0123456789abcdef0\u003cbr/\u003ecom.amazonaws.us-east-1.dynamodb | vpce-0987654321fedcba0\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003eTraffic to S3 and DynamoDB now uses the VPC endpoint instead of the NAT Gateway.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eStep 3: Update IAM Policies (If Needed)\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eIf you have bucket policies restricting access by VPC endpoint, update them:\u003c/p\u003e\u003cp\u003e\u003cpre\u003e\u003ccode\u003e{\u003cbr/\u003e  \"Version\": \"2012-10-17\",\u003cbr/\u003e  \"Statement\": [\u003cbr/\u003e    {\u003cbr/\u003e      \"Effect\": \"Allow\",\u003cbr/\u003e      \"Principal\": \"*\",\u003cbr/\u003e      \"Action\": \"s3:GetObject\",\u003cbr/\u003e      \"Resource\": \"arn:aws:s3:::my-bucket/*\",\u003cbr/\u003e      \"Condition\": {\u003cbr/\u003e        \"StringEquals\": {\u003cbr/\u003e          \"aws:SourceVpce\": \"vpce-0123456789abcdef0\"\u003cbr/\u003e        }\u003cbr/\u003e      }\u003cbr/\u003e    }\u003cbr/\u003e  ]\u003cbr/\u003e}\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003e\u003ch3\u003eCost Impact\u003c/h3\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eBefore:\u003c/strong\u003e\u003cbr/\u003e\u003cli\u003e2 TB/month S3 traffic through NAT Gateway\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e2,000 GB × $0.045 = $90/month (data processing)\u003c/li\u003e\u003cbr/\u003e\u003cli\u003ePlus data transfer costs: $0.09/GB × 2,000 = $180/month\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eTotal: $270/month\u003c/li\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eAfter:\u003c/strong\u003e\u003cbr/\u003e\u003cli\u003eGateway VPC endpoint: FREE\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eNo NAT Gateway processing charges\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eData transfer: FREE (within AWS)\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eTotal: $0/month\u003c/li\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eSavings: $270/month\u003c/strong\u003e for 2 TB of S3 traffic.\u003c/p\u003e\u003cp\u003eScale this up:\u003cbr/\u003e\u003cli\u003e10 TB/month: $1,350/month saved\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e50 TB/month: $6,750/month saved\u003c/li\u003e\u003c/p\u003e\u003cp\u003e\u003ch3\u003eInterface Endpoints for Other Services\u003c/h3\u003e\u003c/p\u003e\u003cp\u003eFor services that don't support gateway endpoints (API Gateway, SQS, SNS, etc.), use interface endpoints:\u003c/p\u003e\u003cp\u003e\u003cpre\u003e\u003ccode\u003eInterface Endpoint Pricing:\u003cbr/\u003e\u003cli\u003e$0.011/hour (approx. $8.76/month per AZ)\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e$0.01/GB data processing\u003c/li\u003e\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003eCompare to NAT Gateway:\u003cbr/\u003e\u003cli\u003e$0.045/hour (approx. $32.40/month per AZ)\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e$0.045/GB data processing\u003c/li\u003e\u003c/p\u003e\u003cp\u003eEven with the hourly charge, interface endpoints are cheaper if you're sending significant traffic to the service.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eRule of thumb:\u003c/strong\u003e\u003cbr/\u003e\u003cli\u003eIf you send \u003e200 GB/month to a specific service → Use an interface endpoint\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eIf you send \u003c200 GB/month → NAT Gateway may be cheaper\u003c/li\u003e\u003c/p\u003e\u003cp\u003e\u003ch2\u003e$2\u003c/h2\u003e\u003c/p\u003e\u003cp\u003eFor non-production or cost-sensitive workloads, NAT instances can dramatically reduce costs.\u003c/p\u003e\u003cp\u003e\u003ch3\u003eThe Cost Comparison\u003c/h3\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eNAT Gateway (us-east-1):\u003c/strong\u003e\u003cbr/\u003e\u003cli\u003eHourly: $0.045/hour × 730 hours = $32.85/month\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eData processing: $0.045/GB\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eManaged by AWS (high availability, auto-scaling)\u003c/li\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eNAT Instance (t4g.nano):\u003c/strong\u003e\u003cbr/\u003e\u003cli\u003eHourly: $0.0042/hour × 730 hours = $3.07/month\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eNO data processing charges\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eYou manage it (can fail, needs monitoring)\u003c/li\u003e\u003c/p\u003e\u003cp\u003eFor 100 GB/month traffic:\u003cbr/\u003e\u003cli\u003eNAT Gateway: $32.85 + (100 × $0.045) = $37.35/month\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eNAT Instance: $3.07/month\u003c/li\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eSavings: $34.28/month (91.7%)\u003c/strong\u003e\u003c/p\u003e\u003cp\u003e\u003ch3\u003eWhen to Use NAT Instances\u003c/h3\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eUse NAT Instances for:\u003c/strong\u003e\u003cbr/\u003e\u003cli\u003eDevelopment/staging environments\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eLow-traffic production workloads (\u003c 100 GB/month)\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eWorkloads that can tolerate downtime\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eBudget-constrained projects\u003c/li\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eUse NAT Gateways for:\u003c/strong\u003e\u003cbr/\u003e\u003cli\u003eProduction workloads requiring 99.99% availability\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eHigh-traffic scenarios (\u003e 500 GB/month)\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eWhen you want AWS-managed infrastructure\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eMulti-AZ deployments without manual failover\u003c/li\u003e\u003c/p\u003e\u003cp\u003e\u003ch3\u003eImplementation: Using fck-nat\u003c/h3\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003efck-nat\u003c/strong\u003e is a pre-built NAT AMI that simplifies NAT instance deployment.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eStep 1: Launch NAT Instance\u003c/strong\u003e\u003c/p\u003e\u003cp\u003e\u003cpre\u003e\u003ccode\u003e# Find the latest fck-nat AMI\u003cbr/\u003eAMI=$(aws ec2 describe-images \\\u003cbr/\u003e  --owners 099720109477 \\\u003cbr/\u003e  --filters \"Name=name,Values=fck-nat-*\" \"Name=state,Values=available\" \\\u003cbr/\u003e  --query 'sort_by(Images, \u0026CreationDate)[-1].ImageId' \\\u003cbr/\u003e  --output text)\u003c/p\u003e\u003cp\u003e\u003ch1\u003eLaunch the instance\u003c/h1\u003e\u003cbr/\u003eINSTANCE_ID=$(aws ec2 run-instances \\\u003cbr/\u003e  --image-id $AMI \\\u003cbr/\u003e  --instance-type t4g.nano \\\u003cbr/\u003e  --subnet-id subnet-0123456789abcdef0 \\\u003cbr/\u003e  --security-group-ids sg-0123456789abcdef0 \\\u003cbr/\u003e  --tag-specifications \"ResourceType=instance,Tags=[{Key=Name,Value=fck-nat-dev}]\" \\\u003cbr/\u003e  --query 'Instances[0].InstanceId' \\\u003cbr/\u003e  --output text)\u003c/p\u003e\u003cp\u003e\u003ch1\u003eDisable source/destination check\u003c/h1\u003e\u003cbr/\u003eaws ec2 modify-instance-attribute \\\u003cbr/\u003e  --instance-id $INSTANCE_ID \\\u003cbr/\u003e  --no-source-dest-check\u003c/p\u003e\u003cp\u003e\u003ch1\u003eAssociate Elastic IP\u003c/h1\u003e\u003cbr/\u003eEIP_ALLOCATION_ID=$(aws ec2 allocate-address --domain vpc --query 'AllocationId' --output text)\u003cbr/\u003eaws ec2 associate-address \\\u003cbr/\u003e  --instance-id $INSTANCE_ID \\\u003cbr/\u003e  --allocation-id $EIP_ALLOCATION_ID\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eStep 2: Update Route Tables\u003c/strong\u003e\u003c/p\u003e\u003cp\u003e\u003cpre\u003e\u003ccode\u003e# Replace NAT Gateway route with NAT instance route\u003cbr/\u003eaws ec2 replace-route \\\u003cbr/\u003e  --route-table-id rtb-0123456789abcdef0 \\\u003cbr/\u003e  --destination-cidr-block 0.0.0.0/0 \\\u003cbr/\u003e  --instance-id $INSTANCE_ID\u003c/p\u003e\u003cp\u003e\u003ch1\u003eVerify the route\u003c/h1\u003e\u003cbr/\u003eaws ec2 describe-route-tables \\\u003cbr/\u003e  --route-table-ids rtb-0123456789abcdef0 \\\u003cbr/\u003e  --query 'RouteTables[0].Routes'\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eStep 3: Configure Auto-Scaling and Monitoring\u003c/strong\u003e\u003c/p\u003e\u003cp\u003e\u003cpre\u003e\u003ccode\u003e# CloudWatch alarm for high CPU utilization\u003cbr/\u003eimport boto3\u003c/p\u003e\u003cp\u003ecloudwatch = boto3.client('cloudwatch')\u003c/p\u003e\u003cp\u003ecloudwatch.put_metric_alarm(\u003cbr/\u003e    AlarmName='fck-nat-high-cpu',\u003cbr/\u003e    AlarmDescription='NAT instance CPU \u003e 80% for 5 minutes',\u003cbr/\u003e    Namespace='AWS/EC2',\u003cbr/\u003e    MetricName='CPUUtilization',\u003cbr/\u003e    Dimensions=[{\u003cbr/\u003e        'Name': 'InstanceId',\u003cbr/\u003e        'Value': 'i-0123456789abcdef0'\u003cbr/\u003e    }],\u003cbr/\u003e    Statistic='Average',\u003cbr/\u003e    Period=300,\u003cbr/\u003e    EvaluationPeriods=1,\u003cbr/\u003e    Threshold=80.0,\u003cbr/\u003e    ComparisonOperator='GreaterThanThreshold',\u003cbr/\u003e    AlarmActions=['arn:aws:sns:us-east-1:123456789012:ops-alerts']\u003cbr/\u003e)\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003e\u003ch3\u003eHigh Availability with Auto Scaling Groups\u003c/h3\u003e\u003c/p\u003e\u003cp\u003eFor production use with NAT instances, use an Auto Scaling Group:\u003c/p\u003e\u003cp\u003e\u003cpre\u003e\u003ccode\u003e# Create launch template for NAT instances\u003cbr/\u003eaws ec2 create-launch-template \\\u003cbr/\u003e  --launch-template-name nat-instance-template \\\u003cbr/\u003e  --launch-template-data '{\u003cbr/\u003e    \"ImageId\": \"ami-0123456789abcdef0\",\u003cbr/\u003e    \"InstanceType\": \"t4g.nano\",\u003cbr/\u003e    \"SecurityGroupIds\": [\"sg-0123456789abcdef0\"],\u003cbr/\u003e    \"UserData\": \"'$(base64 -w0 user-data.sh)'\",\u003cbr/\u003e    \"TagSpecifications\": [{\u003cbr/\u003e      \"ResourceType\": \"instance\",\u003cbr/\u003e      \"Tags\": [{\"Key\": \"Name\", \"Value\": \"fck-nat\"}]\u003cbr/\u003e    }]\u003cbr/\u003e  }'\u003c/p\u003e\u003cp\u003e\u003ch1\u003eCreate Auto Scaling Group\u003c/h1\u003e\u003cbr/\u003eaws autoscaling create-auto-scaling-group \\\u003cbr/\u003e  --auto-scaling-group-name nat-asg \\\u003cbr/\u003e  --launch-template LaunchTemplateId=lt-0123456789abcdef0 \\\u003cbr/\u003e  --min-size 2 \\\u003cbr/\u003e  --max-size 2 \\\u003cbr/\u003e  --desired-capacity 2 \\\u003cbr/\u003e  --vpc-zone-identifier \"subnet-0123456789abcdef0,subnet-0987654321fedcba0\"\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003eThis gives you HA with NAT instances at a fraction of the cost.\u003c/p\u003e\u003cp\u003e\u003ch2\u003e$2\u003c/h2\u003e\u003c/p\u003e\u003cp\u003eIPv6 eliminates the need for NAT Gateways for outbound internet traffic.\u003c/p\u003e\u003cp\u003e\u003ch3\u003eHow It Works\u003c/h3\u003e\u003c/p\u003e\u003cp\u003eWith IPv4, private subnets need NAT to access the internet:\u003cbr/\u003e\u003cpre\u003e\u003ccode\u003ePrivate Subnet → NAT Gateway → Internet Gateway → Internet\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003eWith IPv6, instances have public addresses and use an Egress-only Internet Gateway:\u003cbr/\u003e\u003cpre\u003e\u003ccode\u003eIPv6 Subnet → Egress-only Internet Gateway → Internet\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eEgress-only Internet Gateway Pricing:\u003c/strong\u003e\u003cbr/\u003e\u003cli\u003eHourly charge: \u003cstrong\u003eFREE\u003c/strong\u003e\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eData processing: \u003cstrong\u003eFREE\u003c/strong\u003e\u003c/li\u003e\u003c/p\u003e\u003cp\u003e\u003ch3\u003eImplementation\u003c/h3\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eStep 1: Enable IPv6 in Your VPC\u003c/strong\u003e\u003c/p\u003e\u003cp\u003e\u003cpre\u003e\u003ccode\u003e# Associate IPv6 CIDR block with VPC\u003cbr/\u003eaws ec2 associate-vpc-cidr-block \\\u003cbr/\u003e  --vpc-id vpc-0123456789abcdef0 \\\u003cbr/\u003e  --amazon-provided-ipv6-cidr-block\u003c/p\u003e\u003cp\u003e\u003ch1\u003eEnable IPv6 on subnets\u003c/h1\u003e\u003cbr/\u003eaws ec2 modify-subnet-attribute \\\u003cbr/\u003e  --subnet-id subnet-0123456789abcdef0 \\\u003cbr/\u003e  --ipv6-cidr-block-auto-assign-id\u003c/p\u003e\u003cp\u003e\u003ch1\u003eUpdate route table for IPv6\u003c/h1\u003e\u003cbr/\u003eaws ec2 create-route \\\u003cbr/\u003e  --route-table-id rtb-0123456789abcdef0 \\\u003cbr/\u003e  --destination-ipv6-cidr-block ::/0 \\\u003cbr/\u003e  --egress-only-internet-gateway-id eigw-0123456789abcdef0\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eStep 2: Create Egress-Only Internet Gateway\u003c/strong\u003e\u003c/p\u003e\u003cp\u003e\u003cpre\u003e\u003ccode\u003e# Create the gateway\u003cbr/\u003eaws ec2 create-egress-only-internet-gateway \\\u003cbr/\u003e  --vpc-id vpc-0123456789abcdef0\u003c/p\u003e\u003cp\u003e\u003ch1\u003eAttach to route table\u003c/h1\u003e\u003cbr/\u003eaws ec2 create-route \\\u003cbr/\u003e  --route-table-id rtb-0123456789abcdef0 \\\u003cbr/\u003e  --destination-ipv6-cidr-block ::/0 \\\u003cbr/\u003e  --egress-only-internet-gateway-id eigw-0123456789abcdef0\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eStep 3: Configure EC2 Instances\u003c/strong\u003e\u003c/p\u003e\u003cp\u003e\u003cpre\u003e\u003ccode\u003e# Assign IPv6 address during launch\u003cbr/\u003eINSTANCE_ID=$(aws ec2 run-instances \\\u003cbr/\u003e  --image-id ami-0123456789abcdef0 \\\u003cbr/\u003e  --instance-type t3.medium \\\u003cbr/\u003e  --subnet-id subnet-0123456789abcdef0 \\\u003cbr/\u003e  --ipv6-address-count 1 \\\u003cbr/\u003e  --query 'Instances[0].InstanceId' \\\u003cbr/\u003e  --output text)\u003c/p\u003e\u003cp\u003e\u003ch1\u003eOr add to existing instance\u003c/h1\u003e\u003cbr/\u003eaws ec2 assign-ipv6-addresses \\\u003cbr/\u003e  --instance-id $INSTANCE_ID \\\u003cbr/\u003e  --ipv6-addresses 2001:db8::1234\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003e\u003ch3\u003eCost Impact\u003c/h3\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eBefore (IPv4 + NAT Gateway):\u003c/strong\u003e\u003cbr/\u003e\u003cli\u003eNAT Gateway: $32.85/month\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eData processing (1 TB): $45/month\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eTotal: $77.85/month\u003c/li\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eAfter (IPv6 + Egress-only IGW):\u003c/strong\u003e\u003cbr/\u003e\u003cli\u003eEgress-only IGW: FREE\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eData processing: FREE\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eTotal: $0/month\u003c/li\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eSavings: $77.85/month per TB of outbound traffic\u003c/strong\u003e\u003c/p\u003e\u003cp\u003e\u003ch3\u003eWhen to Use IPv6\u003c/h3\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eUse IPv6 for:\u003c/strong\u003e\u003cbr/\u003e\u003cli\u003eNew deployments (greenfield projects)\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eHigh outbound traffic volumes\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eWorkloads that can be dual-stack (IPv4 + IPv6)\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eServices with external IPv6 support\u003c/li\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eChallenges:\u003c/strong\u003e\u003cbr/\u003e\u003cli\u003eLegacy systems that don't support IPv6\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eExternal services that are IPv4-only\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eRequires application-level changes\u003c/li\u003e\u003c/p\u003e\u003cp\u003e\u003ch2\u003e$2\u003c/h2\u003e\u003c/p\u003e\u003cp\u003eBefore optimizing, you need to understand what's flowing through your NAT Gateways.\u003c/p\u003e\u003cp\u003e\u003ch3\u003eEnable VPC Flow Logs\u003c/h3\u003e\u003c/p\u003e\u003cp\u003e\u003cpre\u003e\u003ccode\u003e# Enable flow logs for NAT Gateway\u003cbr/\u003eaws ec2 create-flow-logs \\\u003cbr/\u003e  --resource-type VPC \\\u003cbr/\u003e  --resource-id vpc-0123456789abcdef0 \\\u003cbr/\u003e  --traffic-type ALL \\\u003cbr/\u003e  --log-destination-type cloud-watch-logs \\\u003cbr/\u003e  --log-group-name /aws/vpc/flow-logs \\\u003cbr/\u003e  --deliver-logs-permission-arn arn:aws:iam::123456789012:role/FlowLogsRole\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eFlow Logs Pricing:\u003c/strong\u003e\u003cbr/\u003e\u003cli\u003e$0.50 per 1M flow log records\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e$0.025 per GB of CloudWatch Logs\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eTypically $5-20/month for moderate traffic\u003c/li\u003e\u003c/p\u003e\u003cp\u003e\u003ch3\u003eQuery Top Talkers with CloudWatch Logs Insights\u003c/h3\u003e\u003c/p\u003e\u003cp\u003e\u003cpre\u003e\u003ccode\u003e# Find top 10 instances by bytes transferred through NAT Gateway\u003cbr/\u003efields @timestamp, srcAddr, dstAddr, bytes, protocol, port\u003cbr/\u003e| filter dstAddr like '10.0.0.0/8'\u003cbr/\u003e| filter action = 'ACCEPT'\u003cbr/\u003e| stats sum(bytes) as totalBytes by srcAddr\u003cbr/\u003e| sort totalBytes desc\u003cbr/\u003e| limit 10\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003e\u003cpre\u003e\u003ccode\u003e# Find top 10 destinations by bytes\u003cbr/\u003efields @timestamp, srcAddr, dstAddr, bytes, protocol, port\u003cbr/\u003e| filter action = 'ACCEPT'\u003cbr/\u003e| stats sum(bytes) as totalBytes by dstAddr\u003cbr/\u003e| sort totalBytes desc\u003cbr/\u003e| limit 10\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003e\u003cpre\u003e\u003ccode\u003e# Identify S3 traffic (should use VPC endpoint)\u003cbr/\u003efields @timestamp, srcAddr, dstAddr, bytes\u003cbr/\u003e| filter dstPort = 443\u003cbr/\u003e| filter action = 'ACCEPT'\u003cbr/\u003e| filter dstAddr like '52.216.0.0/16'  # S3 IPs\u003cbr/\u003e| stats sum(bytes) as s3ThroughNAT by srcAddr\u003cbr/\u003e| sort s3ThroughNAT desc\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003e\u003ch3\u003eAnalyze Traffic Patterns\u003c/h3\u003e\u003c/p\u003e\u003cp\u003e\u003cpre\u003e\u003ccode\u003e# Python script to identify optimization opportunities\u003cbr/\u003eimport boto3\u003c/p\u003e\u003cp\u003edef analyze_nat_traffic():\u003cbr/\u003e    logs = boto3.client('logs')\u003c/p\u003e\u003cp\u003e    # Query for last 7 days of S3 traffic\u003cbr/\u003e    query = '''\u003cbr/\u003e    fields @timestamp, srcAddr, dstAddr, bytes, port\u003cbr/\u003e    | filter port = 443\u003cbr/\u003e    | filter dstAddr like '52.216%'\u003cbr/\u003e    | stats sum(bytes) as totalBytes by srcAddr\u003cbr/\u003e    | sort totalBytes desc\u003cbr/\u003e    | limit 20\u003cbr/\u003e    '''\u003c/p\u003e\u003cp\u003e    response = logs.start_query(\u003cbr/\u003e        logGroupName='/aws/vpc/flow-logs',\u003cbr/\u003e        startTime=int((datetime.now() - timedelta(days=7)).timestamp()),\u003cbr/\u003e        endTime=int(datetime.now().timestamp()),\u003cbr/\u003e        queryString=query\u003cbr/\u003e    )\u003c/p\u003e\u003cp\u003e    query_id = response['queryId']\u003c/p\u003e\u003cp\u003e    # Wait for results\u003cbr/\u003e    time.sleep(60)\u003c/p\u003e\u003cp\u003e    results = logs.get_query_results(queryId=query_id)\u003c/p\u003e\u003cp\u003e    # Calculate savings if using VPC endpoint\u003cbr/\u003e    total_bytes = sum(int(r[3]['value']) for r in results['results'])\u003cbr/\u003e    savings = (total_bytes / 1e9) * 0.045  # $0.045/GB\u003c/p\u003e\u003cp\u003e    print(\"\"\u003cbr/\u003e    print(\"\"  # 7 days to 30 days\u003c/p\u003e\u003cp\u003eanalyze_nat_traffic()\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003e\u003ch3\u003eIdentify Low-Value NAT Gateways\u003c/h3\u003e\u003c/p\u003e\u003cp\u003e\u003cpre\u003e\u003ccode\u003e# Find NAT Gateways with minimal traffic\u003cbr/\u003efields @timestamp, srcAddr, bytes\u003cbr/\u003e| filter action = 'ACCEPT'\u003cbr/\u003e| stats sum(bytes) as totalBytes by srcAddr\u003cbr/\u003e| where totalBytes \u003c 104857600  # Less than 100 MB\u003cbr/\u003e| sort totalBytes asc\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003eIf a NAT Gateway is processing less than 100 GB/month, consider:\u003cbr/\u003e\u003cli\u003eConsolidating with another AZ's NAT Gateway\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eReplacing with a NAT instance\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eRemoving entirely if unused\u003c/li\u003e\u003c/p\u003e\u003cp\u003e\u003ch2\u003e$2\u003c/h2\u003e\u003c/p\u003e\u003cp\u003e\u003ch3\u003eBefore: Traditional NAT Gateway Architecture\u003c/h3\u003e\u003c/p\u003e\u003cp\u003e\u003cpre\u003e\u003ccode\u003e┌─────────────────────────────────────────────────────────┐\u003cbr/\u003e│                        VPC                              │\u003cbr/\u003e│  ┌──────────────────────────────────────────────────┐  │\u003cbr/\u003e│  │              Public Subnets (AZ 1, 2, 3)         │  │\u003cbr/\u003e│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐       │  │\u003cbr/\u003e│  │  │   NAT    │  │   NAT    │  │   NAT    │       │  │\u003cbr/\u003e│  │  │ Gateway  │  │ Gateway  │  │ Gateway  │       │  │\u003cbr/\u003e│  │  │$32.40/mo │  │$32.40/mo │  │$32.40/mo │       │  │\u003cbr/\u003e│  │  └──────────┘  └──────────┘  └──────────┘       │  │\u003cbr/\u003e│  └──────────────────────────────────────────────────┘  │\u003cbr/\u003e│                                                         │\u003cbr/\u003e│  ┌──────────────────────────────────────────────────┐  │\u003cbr/\u003e│  │              Private Subnets                      │  │\u003cbr/\u003e│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐       │  │\u003cbr/\u003e│  │  │  EC2     │  │  EC2     │  │  EC2     │       │  │\u003cbr/\u003e│  │  │  App 1   │  │  App 2   │  │  App 3   │       │  │\u003cbr/\u003e│  │  └──────────┘  └──────────┘  └──────────┘       │  │\u003cbr/\u003e│  │                                                   │  │\u003cbr/\u003e│  │  All traffic → NAT Gateway → Internet           │  │\u003cbr/\u003e│  │  (Including S3, DynamoDB, etc.)                  │  │\u003cbr/\u003e│  └──────────────────────────────────────────────────┘  │\u003cbr/\u003e└─────────────────────────────────────────────────────────┘\u003cbr/\u003e                    │\u003cbr/\u003e                    ▼\u003cbr/\u003e              Internet Gateway\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eMonthly Costs (Example):\u003c/strong\u003e\u003cbr/\u003e\u003cli\u003e3 NAT Gateways: $97.20\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e2 TB S3 traffic: $90 (data processing)\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e1 TB other traffic: $45 (data processing)\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eTotal: $232.20/month\u003c/li\u003e\u003c/p\u003e\u003cp\u003e\u003ch3\u003eAfter: Optimized Architecture\u003c/h3\u003e\u003c/p\u003e\u003cp\u003e\u003cpre\u003e\u003ccode\u003e┌─────────────────────────────────────────────────────────┐\u003cbr/\u003e│                        VPC                              │\u003cbr/\u003e│  ┌──────────────────────────────────────────────────┐  │\u003cbr/\u003e│  │           Public Subnets (AZ 1, 2)              │  │\u003cbr/\u003e│  │  ┌──────────┐      ┌──────────┐                 │  │\u003cbr/\u003e│  │  │   NAT    │      │   NAT    │                 │  │\u003cbr/\u003e│  │  │ Gateway  │      │ Gateway  │                 │  │\u003cbr/\u003e│  │  │$32.40/mo │      │$32.40/mo │                 │  │\u003cbr/\u003e│  │  └──────────┘      └──────────┘                 │  │\u003cbr/\u003e│  └──────────────────────────────────────────────────┘  │\u003cbr/\u003e│                                                         │\u003cbr/\u003e│  ┌──────────────────────────────────────────────────┐  │\u003cbr/\u003e│  │           Gateway VPC Endpoints                 │  │\u003cbr/\u003e│  │  ┌──────────┐           ┌──────────┐            │  │\u003cbr/\u003e│  │  │   S3     │           │DynamoDB  │            │  │\u003cbr/\u003e│  │  │Endpoint  │           │Endpoint  │            │  │\u003cbr/\u003e│  │  │   FREE   │           │  FREE    │            │  │\u003cbr/\u003e│  │  └──────────┘           └──────────┘            │  │\u003cbr/\u003e│  └──────────────────────────────────────────────────┘  │\u003cbr/\u003e│                                                         │\u003cbr/\u003e│  ┌──────────────────────────────────────────────────┐  │\u003cbr/\u003e│  │              Private Subnets                      │  │\u003cbr/\u003e│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐       │  │\u003cbr/\u003e│  │  │  EC2     │  │  EC2     │  │  EC2     │       │  │\u003cbr/\u003e│  │  │  App 1   │  │  App 2   │  │  App 3   │       │  │\u003cbr/\u003e│  │  └──────────┘  └──────────┘  └──────────┘       │  │\u003cbr/\u003e│  │                                                   │  │\u003cbr/\u003e│  │  S3/DynamoDB → VPC Endpoint (FREE)              │  │\u003cbr/\u003e│  │  Other traffic → NAT Gateway                     │  │\u003cbr/\u003e│  └──────────────────────────────────────────────────┘  │\u003cbr/\u003e└─────────────────────────────────────────────────────────┘\u003cbr/\u003e                    │\u003cbr/\u003e                    ▼\u003cbr/\u003e              Internet Gateway\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eMonthly Costs (Optimized):\u003c/strong\u003e\u003cbr/\u003e\u003cli\u003e2 NAT Gateways: $64.80\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e2 TB S3 traffic: $0 (via VPC endpoint)\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e1 TB other traffic: $45 (data processing)\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eTotal: $109.80/month\u003c/li\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eSavings: $122.40/month (52.7%)\u003c/strong\u003e\u003c/p\u003e\u003cp\u003e\u003ch2\u003e$2\u003c/h2\u003e\u003c/p\u003e\u003cp\u003eLet's walk through a real-world scenario with specific numbers.\u003c/p\u003e\u003cp\u003e\u003ch3\u003eScenario: Multi-AZ Application with High S3 Usage\u003c/h3\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eEnvironment:\u003c/strong\u003e\u003cbr/\u003e\u003cli\u003e4 Availability Zones (us-east-1)\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e4 NAT Gateways (one per AZ)\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e5 TB/month S3 traffic\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e2 TB/month internet traffic\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e100 EC2 instances\u003c/li\u003e\u003c/p\u003e\u003cp\u003e\u003ch3\u003eBefore Optimization\u003c/h3\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eNAT Gateway Hourly Charges:\u003c/strong\u003e\u003cbr/\u003e\u003cpre\u003e\u003ccode\u003e4 gateways × $32.40/month = $129.60/month\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eData Processing Charges:\u003c/strong\u003e\u003cbr/\u003e\u003cpre\u003e\u003ccode\u003eS3: 5 TB × $0.045/GB = $225/month\u003cbr/\u003eInternet: 2 TB × $0.045/GB = $90/month\u003cbr/\u003eTotal data processing: $315/month\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eData Transfer Charges (outbound to internet):\u003c/strong\u003e\u003cbr/\u003e\u003cpre\u003e\u003ccode\u003e2 TB × $0.09/GB = $180/month\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eTotal Monthly Cost:\u003c/strong\u003e\u003cbr/\u003e\u003cpre\u003e\u003ccode\u003e$129.60 (hourly) + $315 (data processing) + $180 (data transfer) = $624.60/month\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003e\u003ch3\u003eAfter Optimization\u003c/h3\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eStep 1: Create VPC Endpoints for S3 and DynamoDB\u003c/strong\u003e\u003cbr/\u003e\u003cli\u003eCost: FREE\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eSavings: 5 TB × $0.045/GB = $225/month\u003c/li\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eStep 2: Reduce NAT Gateways from 4 to 2 (HA with 2 AZs)\u003c/strong\u003e\u003cbr/\u003e\u003cli\u003eCost: 2 × $32.40 = $64.80/month\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eSavings: $64.80/month\u003c/li\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eStep 3: Ensure same-AZ placement\u003c/strong\u003e\u003cbr/\u003e\u003cli\u003eEliminate cross-AZ transfer: ~$20/month\u003c/li\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eOptimized Monthly Cost:\u003c/strong\u003e\u003cbr/\u003e\u003cpre\u003e\u003ccode\u003e$64.80 (2 NAT gateways) + $90 (1 TB data processing) + $90 (data transfer) = $244.80/month\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eTotal Savings: $379.80/month (60.8%)\u003c/strong\u003e\u003c/p\u003e\u003cp\u003e\u003ch3\u003eAnnual ROI\u003c/h3\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eOne-time implementation:\u003c/strong\u003e\u003cbr/\u003e\u003cli\u003eVPC endpoint creation: 2 hours\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eRoute table updates: 1 hour\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eTesting and validation: 4 hours\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eTotal: 7 hours @ $150/hr = $1,050\u003c/li\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eMonthly savings:\u003c/strong\u003e $379.80\u003cbr/\u003e\u003cstrong\u003eAnnual savings:\u003c/strong\u003e $4,557.60\u003c/p\u003e\u003cp\u003e\u003cstrong\u003ePayback period:\u003c/strong\u003e \u003c 1 week\u003c/p\u003e\u003cp\u003e\u003ch2\u003e$2\u003c/h2\u003e\u003c/p\u003e\u003cp\u003e\u003ch3\u003ePhase 1: Assessment (1-2 days)\u003c/h3\u003e\u003c/p\u003e\u003cp\u003e\u003cli\u003e[ ] Enable VPC Flow Logs for all VPCs\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e[ ] Query top destinations by traffic volume\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e[ ] Identify S3 and DynamoDB traffic through NAT Gateways\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e[ ] Calculate potential savings with VPC endpoints\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e[ ] Document current NAT Gateway architecture\u003c/li\u003e\u003c/p\u003e\u003cp\u003e\u003ch3\u003ePhase 2: Quick Wins (1 day)\u003c/h3\u003e\u003c/p\u003e\u003cp\u003e\u003cli\u003e[ ] Create gateway VPC endpoints for S3\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e[ ] Create gateway VPC endpoints for DynamoDB\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e[ ] Update route tables to use endpoints\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e[ ] Verify connectivity with test instances\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e[ ] Monitor for 24 hours\u003c/li\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eExpected savings:\u003c/strong\u003e 40-60% (if S3/DynamoDB is significant)\u003c/p\u003e\u003cp\u003e\u003ch3\u003ePhase 3: Architecture Optimization (2-3 days)\u003c/h3\u003e\u003c/p\u003e\u003cp\u003e\u003cli\u003e[ ] Evaluate NAT instance vs. NAT Gateway for non-prod\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e[ ] Implement NAT instances for dev/staging if appropriate\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e[ ] Reduce NAT Gateway count if over-provisioned\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e[ ] Ensure same-AZ placement for resources\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e[ ] Update documentation and diagrams\u003c/li\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eExpected savings:\u003c/strong\u003e Additional 10-20%\u003c/p\u003e\u003cp\u003e\u003ch3\u003ePhase 4: Advanced Strategies (Optional)\u003c/h3\u003e\u003c/p\u003e\u003cp\u003e\u003cli\u003e[ ] Evaluate IPv6 migration for new deployments\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e[ ] Create interface endpoints for high-traffic AWS services\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e[ ] Implement traffic segmentation (different NAT Gateways for different workloads)\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e[ ] Set up automated alerts for NAT Gateway usage anomalies\u003c/li\u003e\u003c/p\u003e\u003cp\u003e\u003ch3\u003ePhase 5: Ongoing Monitoring\u003c/h3\u003e\u003c/p\u003e\u003cp\u003e\u003cli\u003e[ ] Set up CloudWatch alarms for NAT Gateway data processing\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e[ ] Create weekly reports on top talkers\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e[ ] Review VPC endpoint utilization\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e[ ] Monitor for new services that could benefit from endpoints\u003c/li\u003e\u003c/p\u003e\u003cp\u003e\u003ch2\u003e$2\u003c/h2\u003e\u003c/p\u003e\u003cp\u003e\u003ch3\u003eQ: Will VPC endpoints break my existing applications?\u003c/h3\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eA:\u003c/strong\u003e No. Gateway endpoints are transparent to applications. As long as you're using standard AWS SDKs, they'll automatically route through the VPC endpoint once the endpoint and routes are configured.\u003c/p\u003e\u003cp\u003eTest with:\u003cbr/\u003e\u003cpre\u003e\u003ccode\u003e# Before: Routes through NAT Gateway\u003cbr/\u003etime aws s3 ls s3://my-bucket\u003c/p\u003e\u003cp\u003e\u003ch1\u003eAfter: Routes through VPC endpoint (should be same or faster)\u003c/h1\u003e\u003cbr/\u003etime aws s3 ls s3://my-bucket\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003e\u003ch3\u003eQ: Can I have multiple NAT Gateways in the same AZ?\u003c/h3\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eA:\u003c/strong\u003e Yes, but you need to manage routing. Create multiple route tables and associate different subnets with different route tables.\u003c/p\u003e\u003cp\u003e\u003cpre\u003e\u003ccode\u003e# Route table 1\u003cbr/\u003eaws ec2 create-route \\\u003cbr/\u003e  --route-table-id rtb-0123456789abcdef0 \\\u003cbr/\u003e  --destination-cidr-block 0.0.0.0/0 \\\u003cbr/\u003e  --gateway-id nat-0123456789abcdef0\u003c/p\u003e\u003cp\u003e\u003ch1\u003eRoute table 2\u003c/h1\u003e\u003cbr/\u003eaws ec2 create-route \\\u003cbr/\u003e  --route-table-id rtb-0987654321fedcba0 \\\u003cbr/\u003e  --destination-cidr-block 0.0.0.0/0 \\\u003cbr/\u003e  --gateway-id nat-0987654321fedcba0\u003c/p\u003e\u003cp\u003e\u003ch1\u003eAssociate different subnets\u003c/h1\u003e\u003cbr/\u003eaws ec2 associate-route-table \\\u003cbr/\u003e  --route-table-id rtb-0123456789abcdef0 \\\u003cbr/\u003e  --subnet-id subnet-0123456789abcdef0\u003c/p\u003e\u003cp\u003eaws ec2 associate-route-table \\\u003cbr/\u003e  --route-table-id rtb-0987654321fedcba0 \\\u003cbr/\u003e  --subnet-id subnet-0987654321fedcba0\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003e\u003ch3\u003eQ: How do I know if an interface endpoint is cost-effective?\u003c/h3\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eA:\u003c/strong\u003e Calculate the break-even point:\u003c/p\u003e\u003cp\u003e\u003cpre\u003e\u003ccode\u003eInterface endpoint cost:\u003cbr/\u003e\u003cli\u003eHourly: $0.011/hour = $8.76/month\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eData processing: $0.01/GB\u003c/li\u003e\u003c/p\u003e\u003cp\u003eNAT Gateway cost:\u003cbr/\u003e\u003cli\u003eHourly: $0.045/hour = $32.40/month\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eData processing: $0.045/GB\u003c/li\u003e\u003c/p\u003e\u003cp\u003eBreak-even calculation:\u003cbr/\u003eTotal NAT cost - Total Interface cost\u003cbr/\u003e(32.40 + 0.045x) - (8.76 + 0.01x) = 0\u003cbr/\u003e23.64 + 0.035x = 0\u003cbr/\u003ex = -675 GB\u003c/p\u003e\u003cp\u003eAt ~675 GB/month, interface endpoint becomes cheaper.\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003eRule of thumb: If you send \u003e 500 GB/month to a specific service, create an interface endpoint.\u003c/p\u003e\u003cp\u003e\u003ch3\u003eQ: What about EIP costs for NAT Gateways?\u003c/h3\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eA:\u003c/strong\u003e NAT Gateways automatically allocate Elastic IPs, which cost $3.60/month × $0.005/GB.\u003c/p\u003e\u003cp\u003eBut wait—this is included in the NAT Gateway hourly charge. You don't pay extra for the EIP.\u003c/p\u003e\u003cp\u003eNAT Instances, however, require you to allocate EIPs separately:\u003cbr/\u003e\u003cli\u003eEIP hourly: ~$3.60/month (if not attached to running instance)\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eEIP data transfer: $0.005/GB\u003c/li\u003e\u003c/p\u003e\u003cp\u003eThis is one of the hidden costs of NAT instances to be aware of.\u003c/p\u003e\u003cp\u003e\u003ch2\u003e$2\u003c/h2\u003e\u003c/p\u003e\u003cp\u003e\u003ch3\u003eScript 1: Audit NAT Gateway Costs\u003c/h3\u003e\u003c/p\u003e\u003cp\u003e\u003cpre\u003e\u003ccode\u003e#!/usr/bin/env python3\u003cbr/\u003eimport boto3\u003cbr/\u003efrom datetime import datetime, timedelta\u003c/p\u003e\u003cp\u003edef audit_nat_gateways():\u003cbr/\u003e    ec2 = boto3.client('ec2')\u003cbr/\u003e    cloudwatch = boto3.client('cloudwatch')\u003c/p\u003e\u003cp\u003e    # Get all NAT Gateways\u003cbr/\u003e    nat_gateways = ec2.describe_nat_gateways()\u003c/p\u003e\u003cp\u003e    print(\"\"\u003cbr/\u003e    print(\"=\" * 60)\u003c/p\u003e\u003cp\u003e    total_monthly_cost = 0\u003c/p\u003e\u003cp\u003e    for nat in nat_gateways['NatGateways']:\u003cbr/\u003e        nat_id = nat['NatGatewayId']\u003cbr/\u003e        state = nat['State']\u003cbr/\u003e        subnet_id = nat['SubnetId']\u003c/p\u003e\u003cp\u003e        # Get data processed in last 30 days\u003cbr/\u003e        end_time = datetime.now()\u003cbr/\u003e        start_time = end_time - timedelta(days=30)\u003c/p\u003e\u003cp\u003e        metrics = cloudwatch.get_metric_statistics(\u003cbr/\u003e            Namespace='AWS/NATGateway',\u003cbr/\u003e            MetricName='BytesOutToDestination',\u003cbr/\u003e            Dimensions=[{'Name': 'NatGatewayId', 'Value': nat_id}],\u003cbr/\u003e            StartTime=start_time,\u003cbr/\u003e            EndTime=end_time,\u003cbr/\u003e            Period=86400,  # Daily\u003cbr/\u003e            Statistics=['Sum']\u003cbr/\u003e        )\u003c/p\u003e\u003cp\u003e        total_bytes = sum(dp['Sum'] for dp in metrics['Datapoints'])\u003cbr/\u003e        data_processing_cost = (total_bytes / (1024**3)) * 0.045\u003cbr/\u003e        hourly_cost = 30 * 24 * 0.045  # Assume running entire month\u003cbr/\u003e        total_cost = hourly_cost + data_processing_cost\u003c/p\u003e\u003cp\u003e        total_monthly_cost += total_cost\u003c/p\u003e\u003cp\u003e        print(\"\"\u003cbr/\u003e        print(\"\"\u003cbr/\u003e        print(\"\"\u003cbr/\u003e        print(\"\"\u003cbr/\u003e        print(\"\"\u003cbr/\u003e        print(\"\"\u003cbr/\u003e        print(\"\"\u003c/p\u003e\u003cp\u003e        # Check for VPC endpoints in same VPC\u003cbr/\u003e        vpc_id = nat['VpcId']\u003cbr/\u003e        vpc_endpoints = ec2.describe_vpc_endpoints(\u003cbr/\u003e            Filters=[{'Name': 'vpc-id', 'Values': [vpc_id]}]\u003cbr/\u003e        )\u003c/p\u003e\u003cp\u003e        gateway_endpoints = [ep for ep in vpc_endpoints['VpcEndpoints']\u003cbr/\u003e                            if ep['VpcEndpointType'] == 'Gateway']\u003c/p\u003e\u003cp\u003e        if gateway_endpoints:\u003cbr/\u003e            print(\"\"\u003cbr/\u003e            for ep in gateway_endpoints:\u003cbr/\u003e                print(\"\"\u003cbr/\u003e        else:\u003cbr/\u003e            print(\"⚠️  No gateway VPC endpoints found!\")\u003c/p\u003e\u003cp\u003e    print(\"\\n\" + \"=\" * 60)\u003cbr/\u003e    print(\"\"\u003cbr/\u003e    print(\"\"\u003c/p\u003e\u003cp\u003eif __name__ == '__main__':\u003cbr/\u003e    audit_nat_gateways()\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003e\u003ch3\u003eScript 2: Create VPC Endpoints for All VPCs\u003c/h3\u003e\u003c/p\u003e\u003cp\u003e\u003cpre\u003e\u003ccode\u003e#!/usr/bin/env python3\u003cbr/\u003eimport boto3\u003c/p\u003e\u003cp\u003edef create_vpc_endpoints():\u003cbr/\u003e    ec2 = boto3.client('ec2')\u003c/p\u003e\u003cp\u003e    # Get all VPCs\u003cbr/\u003e    vpcs = ec2.describe_vpcs()\u003cbr/\u003e    vpc_ids = [vpc['VpcId'] for vpc in vpcs['Vpcs']]\u003c/p\u003e\u003cp\u003e    for vpc_id in vpc_ids:\u003cbr/\u003e        print(\"\"\u003c/p\u003e\u003cp\u003e        # Get route tables for this VPC\u003cbr/\u003e        route_tables = ec2.describe_route_tables(\u003cbr/\u003e            Filters=[{'Name': 'vpc-id', 'Values': [vpc_id]}]\u003cbr/\u003e        )\u003c/p\u003e\u003cp\u003e        rt_ids = [rt['RouteTableId'] for rt in route_tables['RouteTables']]\u003c/p\u003e\u003cp\u003e        # Create S3 endpoint\u003cbr/\u003e        try:\u003cbr/\u003e            s3_endpoint = ec2.create_vpc_endpoint(\u003cbr/\u003e                VpcId=vpc_id,\u003cbr/\u003e                ServiceName='com.amazonaws.us-east-1.s3',\u003cbr/\u003e                VpcEndpointType='Gateway',\u003cbr/\u003e                RouteTableIds=rt_ids\u003cbr/\u003e            )\u003cbr/\u003e            print(\"\"\u003cbr/\u003e        except Exception as e:\u003cbr/\u003e            print(\"\"\u003c/p\u003e\u003cp\u003e        # Create DynamoDB endpoint\u003cbr/\u003e        try:\u003cbr/\u003e            dynamodb_endpoint = ec2.create_vpc_endpoint(\u003cbr/\u003e                VpcId=vpc_id,\u003cbr/\u003e                ServiceName='com.amazonaws.us-east-1.dynamodb',\u003cbr/\u003e                VpcEndpointType='Gateway',\u003cbr/\u003e                RouteTableIds=rt_ids\u003cbr/\u003e            )\u003cbr/\u003e            print(\"\"\u003cbr/\u003e        except Exception as e:\u003cbr/\u003e            print(\"\"\u003c/p\u003e\u003cp\u003eif __name__ == '__main__':\u003cbr/\u003e    create_vpc_endpoints()\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003e\u003ch3\u003eScript 3: NAT Gateway Cost Calculator\u003c/h3\u003e\u003c/p\u003e\u003cp\u003e\u003cpre\u003e\u003ccode\u003e#!/usr/bin/env python3\u003c/p\u003e\u003cp\u003edef calculate_nat_costs():\u003cbr/\u003e    print(\"NAT Gateway Cost Calculator\")\u003cbr/\u003e    print(\"=\" * 50)\u003c/p\u003e\u003cp\u003e    # Get input\u003cbr/\u003e    num_gateways = int(input(\"Number of NAT Gateways: \"))\u003cbr/\u003e    monthly_traffic_gb = float(input(\"Monthly traffic through NAT (GB): \"))\u003c/p\u003e\u003cp\u003e    # Calculate costs\u003cbr/\u003e    hourly_cost = num_gateways * 30 * 24 * 0.045\u003cbr/\u003e    data_processing_cost = monthly_traffic_gb * 0.045\u003cbr/\u003e    total_cost = hourly_cost + data_processing_cost\u003c/p\u003e\u003cp\u003e    # Calculate with VPC endpoints (assuming 60% is S3/DynamoDB)\u003cbr/\u003e    s3_traffic = monthly_traffic_gb * 0.6\u003cbr/\u003e    non_s3_traffic = monthly_traffic_gb * 0.4\u003c/p\u003e\u003cp\u003e    optimized_hourly_cost = num_gateways * 30 * 24 * 0.045\u003cbr/\u003e    optimized_data_cost = non_s3_traffic * 0.045\u003cbr/\u003e    optimized_total = optimized_hourly_cost + optimized_data_cost\u003c/p\u003e\u003cp\u003e    # Display results\u003cbr/\u003e    print(\"\\n\" + \"=\" * 50)\u003cbr/\u003e    print(\"Current Architecture:\")\u003cbr/\u003e    print(\"\"\u003cbr/\u003e    print(\"\"\u003cbr/\u003e    print(\"\"\u003c/p\u003e\u003cp\u003e    print(\"\\nWith VPC Endpoints (60% S3/DynamoDB):\")\u003cbr/\u003e    print(\"\"\u003cbr/\u003e    print(\"\"\u003cbr/\u003e    print(\"\"\u003c/p\u003e\u003cp\u003e    print(\"\\n\" + \"=\" * 50)\u003cbr/\u003e    print(\"\"\u003cbr/\u003e    print(\"\"\u003c/p\u003e\u003cp\u003eif __name__ == '__main__':\u003cbr/\u003e    calculate_nat_costs()\u003cbr/\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/p\u003e\u003cp\u003e\u003ch2\u003e$2\u003c/h2\u003e\u003c/p\u003e\u003cp\u003eNAT Gateways are a silent killer in AWS bills, but they don't have to be. By understanding the cost structure, implementing VPC endpoints, analyzing traffic patterns, and making smart architectural decisions, you can reduce NAT Gateway costs by 80% or more.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eKey takeaways:\u003c/strong\u003e\u003c/p\u003e\u003cp\u003e\u003cli\u003e\u003cstrong\u003eStart with VPC endpoints\u003c/strong\u003e—They're free for S3/DynamoDB and eliminate the most common cost driver\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e\u003cstrong\u003eAnalyze before optimizing\u003c/strong\u003e—Use VPC Flow Logs to understand your traffic patterns\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e\u003cstrong\u003eConsider NAT instances\u003c/strong\u003e—For non-production or low-traffic workloads, they're 90% cheaper\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e\u003cstrong\u003eEvaluate IPv6\u003c/strong\u003e—For new deployments, it can eliminate NAT Gateway costs entirely\u003c/li\u003e\u003cbr/\u003e\u003cli\u003e\u003cstrong\u003eAutomate monitoring\u003c/strong\u003e—Set up alerts to catch cost anomalies before they compound\u003c/li\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eYour next steps:\u003c/strong\u003e\u003c/p\u003e\u003cp\u003e\u003cli\u003eRun the audit script to identify optimization opportunities (today)\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eCreate VPC endpoints for S3 and DynamoDB (this week)\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eAnalyze traffic patterns with VPC Flow Logs (this week)\u003c/li\u003e\u003cbr/\u003e\u003cli\u003eImplement cost-saving strategies based on findings (this month)\u003c/li\u003e\u003c/p\u003e\u003cp\u003eThe $18,000 I saved wasn't theoretical—it came from systematically applying these strategies across multiple AWS accounts. Start with the quick wins, build momentum, and your cloud bills will thank you.\u003c/p\u003e\u003cp\u003eBuilt by engineers, for engineers.\u003cbr/\u003e    "])</script><script>self.__next_f.push([1,"4:[[\"$\",\"$Ld\",null,{}],[\"$\",\"article\",null,{\"style\":{\"padding\":\"10rem 2rem 6rem\",\"maxWidth\":\"900px\",\"margin\":\"0 auto\",\"position\":\"relative\",\"zIndex\":1,\"animation\":\"fadeInUp 0.9s ease-out 0.2s both\"},\"children\":[[\"$\",\"header\",null,{\"style\":{\"marginBottom\":\"4rem\"},\"children\":[[\"$\",\"h1\",null,{\"style\":{\"fontFamily\":\"var(--font-space-grotesk)\",\"fontSize\":\"clamp(2rem, 5vw, 3rem)\",\"fontWeight\":700,\"lineHeight\":1.2,\"marginBottom\":\"1.5rem\",\"color\":\"var(--text-primary)\"},\"children\":\"The Hidden Costs of AWS NAT Gateways (And How to Cut Them by 80%)\"}],[\"$\",\"p\",null,{\"style\":{\"fontSize\":\"1.15rem\",\"color\":\"var(--text-secondary)\",\"marginBottom\":\"1.5rem\",\"lineHeight\":1.8},\"children\":\"I saved $18,000 per month by optimizing NAT Gateway usage. Learn how VPC endpoints, NAT instances, and IPv6 can slash your AWS networking costs.\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"flex\",\"alignItems\":\"center\",\"gap\":\"1rem\",\"fontSize\":\"0.85rem\",\"color\":\"var(--text-muted)\",\"fontFamily\":\"var(--font-jetbrains-mono)\"},\"children\":[[\"$\",\"span\",null,{\"style\":{\"padding\":\"0.4rem 1rem\",\"background\":\"rgba(0, 212, 255, 0.1)\",\"color\":\"var(--accent-cyan)\",\"border\":\"1px solid rgba(0, 212, 255, 0.2)\",\"borderRadius\":\"20px\"},\"children\":[\"12 min\",\" read\"]}],[\"$\",\"span\",null,{\"style\":{\"padding\":\"0.4rem 1rem\",\"background\":\"rgba(168, 85, 247, 0.1)\",\"color\":\"var(--accent-purple)\",\"border\":\"1px solid rgba(168, 85, 247, 0.2)\",\"borderRadius\":\"20px\"},\"children\":\"AWS Cost Optimization\"}]]}]]}],[\"$\",\"div\",null,{\"style\":{\"lineHeight\":1.8,\"color\":\"var(--text-primary)\",\"fontSize\":\"1.05rem\"},\"dangerouslySetInnerHTML\":{\"__html\":\"$e\"}}],\"$Lf\"]}],\"$L10\"]\n"])</script><script>self.__next_f.push([1,"f:[\"$\",\"div\",null,{\"style\":{\"marginTop\":\"5rem\",\"maxWidth\":\"600px\",\"marginLeft\":\"auto\",\"marginRight\":\"auto\",\"background\":\"var(--bg-card)\",\"border\":\"1px solid var(--border-subtle)\",\"borderRadius\":\"24px\",\"padding\":\"3.5rem\",\"position\":\"relative\",\"overflow\":\"hidden\",\"boxShadow\":\"var(--card-shadow)\"},\"children\":[[\"$\",\"div\",null,{\"style\":{\"position\":\"absolute\",\"top\":\"-2px\",\"left\":\"-2px\",\"right\":\"-2px\",\"bottom\":\"-2px\",\"background\":\"linear-gradient(135deg, var(--accent-cyan), var(--accent-purple), var(--accent-cyan))\",\"borderRadius\":\"26px\",\"zIndex\":-1,\"opacity\":0.3}}],[\"$\",\"h2\",null,{\"style\":{\"fontFamily\":\"var(--font-space-grotesk)\",\"fontSize\":\"2rem\",\"fontWeight\":700,\"marginBottom\":\"0.75rem\",\"color\":\"var(--text-primary)\",\"position\":\"relative\",\"zIndex\":1},\"children\":\"Get weekly cloud cost tips\"}],[\"$\",\"p\",null,{\"style\":{\"color\":\"var(--text-secondary)\",\"marginBottom\":\"2rem\",\"fontSize\":\"1rem\",\"lineHeight\":1.8,\"position\":\"relative\",\"zIndex\":1},\"children\":\"Join engineers saving money on cloud costs. Actionable strategies every Friday.\"}],[\"$\",\"a\",null,{\"href\":\"https://sendfox.com/form/3qdz96/36enr2\",\"style\":{\"display\":\"inline-block\",\"fontFamily\":\"var(--font-nunito)\",\"fontSize\":\"1rem\",\"fontWeight\":700,\"padding\":\"1.2rem 2rem\",\"background\":\"linear-gradient(135deg, var(--accent-cyan) 0%, var(--accent-purple) 100%)\",\"color\":\"white\",\"border\":\"none\",\"borderRadius\":\"12px\",\"cursor\":\"pointer\",\"textDecoration\":\"none\",\"transition\":\"all 0.3s ease\",\"position\":\"relative\",\"zIndex\":1},\"children\":\"Subscribe (free)\"}]]}]\n"])</script><script>self.__next_f.push([1,"10:[\"$\",\"footer\",null,{\"style\":{\"padding\":\"3rem 2rem\",\"textAlign\":\"center\",\"borderTop\":\"1px solid var(--border-subtle)\",\"position\":\"relative\",\"zIndex\":1,\"animation\":\"fadeInUp 0.9s ease-out 0.4s both\"},\"children\":[\"$\",\"p\",null,{\"style\":{\"fontFamily\":\"var(--font-nunito)\",\"fontSize\":\"0.85rem\",\"color\":\"var(--text-muted)\"},\"children\":\"© 2026 Cost Nimbus. Built by engineers, for engineers.\"}]}]\n"])</script><script>self.__next_f.push([1,"9:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"11:I[64481,[\"/_next/static/chunks/d6bee75b35a28280.js\",\"/_next/static/chunks/8189c34e001333f7.js\"],\"IconMark\"]\n7:null\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"title\",\"0\",{\"children\":\"The Hidden Costs of AWS NAT Gateways (And How to Cut Them by 80%) | Cost Nimbus | Cost Nimbus\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"I saved $18,000 per month by optimizing NAT Gateway usage. Learn how VPC endpoints, NAT instances, and IPv6 can slash your AWS networking costs.\"}],[\"$\",\"meta\",\"2\",{\"name\":\"keywords\",\"content\":\"AWS Cost Optimization, cloud costs, AWS optimization, FinOps, cloud savings, cost management\"}],[\"$\",\"meta\",\"3\",{\"property\":\"og:title\",\"content\":\"Cost Nimbus - Cloud Cost Intelligence\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:description\",\"content\":\"Real cloud cost optimization strategies built by engineers, for engineers. Save thousands monthly with battle-tested techniques.\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:site_name\",\"content\":\"Cost Nimbus\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:type\",\"content\":\"website\"}],[\"$\",\"meta\",\"7\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"8\",{\"name\":\"twitter:title\",\"content\":\"Cost Nimbus - Cloud Cost Intelligence\"}],[\"$\",\"meta\",\"9\",{\"name\":\"twitter:description\",\"content\":\"Real cloud cost optimization strategies built by engineers, for engineers. Save thousands monthly with battle-tested techniques.\"}],[\"$\",\"link\",\"10\",{\"rel\":\"icon\",\"href\":\"/favicon.ico?favicon.0b3bf435.ico\",\"sizes\":\"256x256\",\"type\":\"image/x-icon\"}],[\"$\",\"$L11\",\"11\",{}]]\n"])</script></body></html>